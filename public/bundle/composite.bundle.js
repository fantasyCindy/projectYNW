!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/public/bundle/",t(0)}([function(e,t,n){"use strict";yn.navigation.name=ynconfig.navigation.i;var r=n(1).handleData,i=n(3);$(function(){i.init(),i.add(".trigger-info");var e=function(){var t=$(".filter"),n=t.find("> .state"),r=t.find(".items"),i={user_id:ynUserId,cStatus:"0",lprice:"",hprice:"",ltarget_revenue:"",htarget_revenue:"",combination_maxterm:"",combination_style:"",pageSize:10,currentPage:1},o=function(){r.find(".select").removeClass("select"),r.find(".all").addClass("select"),i={user_id:ynUserId,cStatus:"0",lprice:"",hprice:"",ltarget_revenue:"",htarget_revenue:"",combination_maxterm:"",combination_style:"",pageSize:10,currentPage:1}};return n.on("click",".item",function(){yn["switch"]($(this)),o();var t=$(this).data("value");"-1"==t?i.cStatus="":i.cStatus=+t,e.onChange(i)}),r.on("click",".goal .value",function(){yn["switch"]($(this));var t=$(this).data("value");if("-1"==t)i.ltarget_revenue=i.htarget_revenue="";else{var n=t.split("--");i.ltarget_revenue=+n[0],i.htarget_revenue=+n[1]}e.onChange(i)}),r.on("click",".price .value",function(){yn["switch"]($(this));var t=$(this).data("value");if("-1"==t)i.lprice=i.hprice="";else{var n=t.split("--");i.lprice=+n[0],i.hprice=+n[1]}e.onChange(i)}),r.on("click",".time .value",function(){yn["switch"]($(this));var t=$(this).data("value");"-1"==t?i.combination_maxterm="":i.combination_maxterm=+t,e.onChange(i)}),r.on("click",".style .value",function(){yn["switch"]($(this));var t=$(this).data("value");"-1"==t?i.combination_style="":i.combination_style=+t,e.onChange(i)}),{initValue:i,onChange:function(e){console.log(e)},getSend:function(){return i}}}(),t=(function(){var e=$(".sort"),t=e.find(".item");t.click(function(){yn["switch"]($(this))})}(),function(){var n=$(".composite-items"),i=n.find(".items"),o=$("body"),a=new yn.loading({marign:200,type:3,container:i}),s=yn.bootpag(n);return s.on("page",function(n,r){var i=e.getSend();i.currentPage=r,t.render(i)}),{render:function(e){a.render(),$.getJSON("/composite/compositeportalList.htm",e,function(t){console.log("组合列表",t);var n=_.max([1,Math.ceil(+t.total/e.pageSize)]),a=r(t.rows);return a.length<1?(i.html(ynconfig.none({margin:300})),void s.hide()):(i.html(template("composite-item-template",a)),s.show().bootpag({page:e.currentPage,total:n}),void o.velocity("scroll",{offset:0}))})}}}());t.render(e.initValue),e.onChange=function(e){t.render(e)}})},function(e,t,n){"use strict";var r=n(2),i=function(e){return e.match(/^[^\s]+/)[0]},o=[[0,"预售中"],[1,"进行中"],[2,"已结束"]],a=[[0,"保守型"],[1,"稳健性"],[2,"激进型"]],s={end:function(e){return"<a "+e.link+' class="ynbtn toFeed done" data-type="done">已结束</a>'},feed:function(e){return"<a "+e.link+' class="ynbtn toFeed">订阅</a>'},feeded:function(e){return'<a class="ynbtn" data-type="feeded">已订阅</a>'},look:function(e){return"<a "+e.link+' class="ynbtn toFeed">查看详情</a>'},peep:function(e){return"<a "+e.link+' class="ynbtn toFeed" data-type="peep">'+e.peepText+"瞄一眼</a>"},bottom:function(e){return"<a "+e.link+' class="ynbtn toFeed" data-type="bottom">已结束</a>'}},c=function(e,t){var n="detail"==t;return _.map(e,function(e){var t=+e.combination_status,c=0===t,u=1===t,l=6===t,d=t>2,f=_.min([t,2]),p=1==+e.is_od,h=ynTeacherId==e.teacherid,v=0===+e.order_price,m={link:n?"":'href="/html/CompositeDetail.htm?'+e.teacherid+"ZHXQ"+e.combinationid+'" target="_blank"',peepText:n?+e.peep_price+"牛币· ":""},g=i(e.systemTime),y=i(e.starttime),b=i(e.endtime),x=new r(y),w=new r(b);return e._style=a[e.combination_style][1],e._content=e.combination_des.substr(0,30)+"...",e._incomeText=["目标收益","当前收益","最终收益"][f],e._income=function(){var t=c?e.target_revenue:e.now_revenue,n=yn.setDecimal(t);return 0===parseFloat(n)?'<span style="color:rgb(102,102,102)">0.00%</span>':yn.color(n,{display:n+"%",upColor:"red"})}(),e._state=o[f][1],e._stateValue=o[f][0],e._endStyle=t>2?"isEnd":"",e._price=0===+e.order_price?"免费":"￥"+e.order_price,e._icon=["ready","running","success"][f],e._status=t,e._runRatio=function(){if(c)return 0;var e=new r(g),t=w.offset(y);return Math.ceil(e.offset(y)/t*100)}(),e._time=function(){var n=[function(e){return"<strong>"+(e.count-1)+"</strong>天后运行"},function(e){return"已经运行<strong>"+e.count+"</strong>天"},function(e){return"共运行<strong>"+e.runCount+"</strong>天"}];return n[f]({count:_.min([Math.abs(x.offset(g))+1,e.combination_maxterm]),runCount:function(){if(t>2){var n=new r(i(e.completetime));return n.offset(y)+1}}()})}(),e._feed=function(){var e=[{key:"end",assert:t>=2},{key:"bottom",assert:l},{key:"feeded",assert:p&&n},{key:"look",assert:h||p&&!d},{key:"peep",assert:u&&!p&&!v},{key:"feed",assert:!0}],r=_.filter(e,function(e){return e.assert});return s[r[0].key](m)}(),e})};e.exports={handleData:c}},function(e,t){"use strict";var n=function(){return(new Date).getTime()},r=function(e){return e.match(/^(20[12]\d)[\/\-]([01]*[0-9])[\/\-](\d+)/)},i=function(e){var t=_.map(e,function(e){return _.padLeft(e,2,"0")}).join("/")+" 00:00:00";return Date.parse(t)},o=function(e){this.stamp=function(){if("string"!=typeof e)return void console.log(e+"不是字符类型");if(!r(e))return void console.log(e+"格式不正确");var t=r(e),n=i([t[1],t[2],t[3]]);return n?n:void console.log(e+"不是有效的日期")}()};o.prototype={add:function(e){var t=function(){return 864e5*e}(),n=this.stamp+t,r=new Date(n),i=r.getFullYear(),o=function(){var e=+r.getMonth()+1;return e<10&&(e="0"+e),e}(),a=r.getDate();return[i,o,a].join("-")},offset:function(e){var t=e&&new o(e).stamp+1||n();return Math.floor((this.stamp-t)/864e5)+1}},e.exports=o},function(e,t,n){"use strict";function r(){return'<div id="personIntro" class="hide">\n        <span id="personIntro-indicate-right" class="indicate right fa fa-caret-right hide"></span>\n        <span id="personIntro-indicate-left" class="indicate left fa fa-caret-left hide"></span>\n        <div class="items"></div>\n    </div>\n    <script type="text/html" id="personIntro-template">\n        <div class="line infoView">\n            <div class="column column1">\n                <div class="teacher-profile-avatar" >\n                    <img src="{{photo}}" style="width:80px;"/>\n                </div>\n            </div>\n            <div class="column column2">\n                <div class="title">\n                    <span class="name">{{username}}</span>\n                    <i class="fa fa-vimeo-square"></i>\n                    <span class="postion">投资顾问</span>\n                </div>\n                <div class="buttons"><button class="care {{_isCare}}">{{_careText}}</button></div>\n                <div class="style">{{_style}}</div>\n            </div>\n        </div>\n        <div class="line countView">\n            <table>\n                <tr>\n                    <td>人气</td>\n                    <td>回答问题</td>\n                    <td>发布观点</td>\n                    <td>直播条数</td>\n                </tr>\n                <tr class="value">\n                    <td>{{popularity_number}}</td>\n                    <td>{{answerCount}}</td>\n                    <td>{{gdcount}}</td>\n                    <td>{{zbcount}}</td>\n                </tr>\n            </table>\n            <a class="ynbtn live-link" href="{{_link}}" target="_blank">看TA直播</a>\n        </div>\n    </script>'}n(4);var i=n(8),o=function(){var e,t,n,o,a,s=!0,c=null,u=function(){var t=this;e.on("mouseenter",function(){return s=!1}),e.on("mouseleave",function(){e.hide(),s=!0}),e.on("click",".care.false",function(){return ynIsLogin?void i.add(ynUserId,c.teacherid).done(function(e){$(t).attr("class","care true").text("取消关注")}):void yn.login.render()}),e.on("click",".care.true",function(){return ynIsLogin?void i.cancel(ynUserId,c.teacherid).done(function(){$(t).attr("class","care false").text("关注")}):void yn.login.render()})},l=function(e){return e._style=_.pluck(e.specialtys,"name").join("，"),e._link="/live/liveDetailLive.htm?teacherid="+e.teacherid,e._careText=e.isAttention?"取消关注":"关注",e._isCare=String(e.isAttention),e},d=function(r,i){n.render();(function(){var t=r.offset(),n=t.top-15,i=function(){var e=t.left;return e>800?(a.show(),o.hide(),e-450-5):(o.show(),a.hide(),e+r.width()+5)}();e.css({left:i,top:n})})();e.show(),$.getJSON("/userinfo/queryUserAllInfo.htm?user_id="+i,function(e){c=l(e),setTimeout(function(){t.html(template("personIntro-template",c))},300)})};return{init:function(){$("body").append(r()),e=$("#personIntro"),t=e.find(".items"),c=null,o=e.find(".indicate.left"),a=e.find(".indicate.right"),n=new yn.loading,n.container=t,n.margin=80,u()},add:function(t){$("body").on("mouseenter",t,function(){var e=this;s=!1,setTimeout(function(){if(!s){var t=$(e).data("userid");d($(e),t)}},350)}).on("mouseleave",t,function(){s=!0,setTimeout(function(){s&&e.hide()},400)})}}}();e.exports={init:o.init,add:o.add}},function(e,t,n){var r=n(5);"string"==typeof r&&(r=[[e.id,r,""]]);n(7)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,"#personIntro{width:450px;position:absolute;border:1px solid #dcdcdc;background:#fff;padding:20px;box-shadow:2px 2px 15px rgba(0,0,0,.3);border-radius:2px;z-index:1000}#personIntro .indicate{font-size:36px;position:absolute;color:#fff;top:25px}#personIntro .indicate.left{left:-10px}#personIntro .indicate.right{right:-10px}#personIntro .infoView{overflow:hidden;margin-bottom:10px}#personIntro .teacher-profile-avatar{width:80px;height:80px;overflow:hidden}#personIntro .teacher-profile-avatar img{width:80px}#personIntro .infoView .column2{margin-left:10px}#personIntro .infoView .title{font-size:18px;margin-bottom:10px}#personIntro .infoView .title .postion{font-size:12px}#personIntro .infoView .title .fa{font-size:12px;color:#d72621}#personIntro .infoView .buttons .care{background:#000;border-color:#000}#personIntro .infoView .buttons .sign{background:#c8c8c8;border-color:#c8c8c8}#personIntro .infoView .style{margin-top:10px;width:300px}#personIntro .infoView .style .item{display:inline-block;font-size:12px;padding:2px}#personIntro .infoView>*{float:left}#personIntro .countView{border-top:1px solid #c8c8c8;padding-top:15px;position:relative}#personIntro .countView table{width:280px}#personIntro .countView td{text-align:center;padding:3px 0;border-left:1px solid #dcdcdc}#personIntro .countView .value td{font-size:21px;font-weight:700;color:#f97b02}#personIntro .countView td:first-child{border:none}#personIntro .countView .live-link{position:absolute;top:25px;right:5px}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=p[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(u(r.parts[o],t));p[r.id]={id:r.id,refs:1,parts:a}}}}function i(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],c=i[3],u={css:a,media:s,sourceMap:c};n[o]?n[o].parts.push(u):t.push(n[o]={id:o,parts:[u]})}return t}function o(e,t){var n=m(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function c(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function u(e,t){var n,r,i;if(t.singleton){var o=y++;n=g||(g=s(t)),r=l.bind(null,n,o,!1),i=l.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(t),r=f.bind(null,n),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=d.bind(null,n),i=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function l(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=x(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var p={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},v=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=h(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=v()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=i(e);return r(n,t),function(e){for(var o=[],a=0;a<n.length;a++){var s=n[a],c=p[s.id];c.refs--,o.push(c)}if(e){var u=i(e);r(u,t)}for(var a=0;a<o.length;a++){var c=o[a];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete p[c.id]}}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){"use strict";var n=function(e){e=_.extend({userid:ynUserId,page:1,row:20},e);var t={user_id:e.userid,currentPage:e.page,pageSize:e.row},n=$.Deferred();return $.getJSON("/center/attentionList.htm",t,function(t){t.pageNumber=_.max([1,+t.total/e.row]),n.resolve(t)}),n.promise()},r=function(e,t){var n=$.Deferred();return $.post("/center/attention.htm",{user_id:e,teacherid:t},function(e){"success"==e&&(layer.msg("关注成功"),n.resolve()),"18"==e&&layer.msg("老师不能关注老师")}),n.promise()},i=function(e,t){var n=$.Deferred();return $.post("/center/attention.htm",{user_id:e,teacherid:t},function(e){"success"==e&&(layer.msg("取消成功"),n.resolve())}),n.promise()};e.exports={add:r,cancel:i,list:n}}]);