!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/public/bundle/",e(0)}([function(t,e,n){"use strict";function i(t){$.getJSON("/simulatedStock/queryserK.htm",{combinationid:p,teacherId:v.teacherid,currentPage:1,pageSize:7},function(e){setTimeout(function(){t({categories:_.map(e,function(t){return t.datetime.match(/^\d+-(\d+-\d+)/)[1]}),data:_.map(e,function(t){return+yn.setDecimal(100*t.totalrate)})})},1e3)})}function o(t){var e=$.Deferred();return $.getJSON("/simulatedStock/queryshlist.htm?combinationid="+p,function(n){h=n;var i=n.length;return i<1?void e.reject():void $.getJSON("/simulatedStock/querysclist.htm?combinationid="+p,function(e){var o=+e.totalcapital;_.times(i,function(e){var i=n[e];yn.queryStock(i.stockcode,{handle:!0,color:!0}).done(function(e){var n=+i.holdingsNumber,r=+yn.filterHTML(e[3]),a=+i.cost;i._current=e[3],i._up=e[33],i._cost=yn.setDecimal(i.cost),i._float=Math.round((r-a)*n*100)/100,i._float=yn.color(i._float),i._holdRate=yn.setDecimal(r*n/o*100)+"%",t(i)})})})}),e.promise()}function r(){$("#userContent").show(),T.init(),I.init(),R.init(),j.init(),O.init(),N.init(),L.init(),M.init(),D(function(t){T.render(),I.render.income(),R.render(),j.render(),L.render()})}function a(){$("#teacherContent").show(),U.init(),z.init(),J.init(),E.init(),P.init(),A.init(),B.init(),H.init(),q.init(),V.init(),F.init(),D(function(t){U.render(),z.render(),z.done=function(){F.render()},A.render()})}function s(t){t=_.extend({categories:["09-01","09-02","09-03","09-04","09-05","09-06"],data:[-2,0,3,-1,2,4],width:410,height:160},t),t.container.highcharts({chart:{borderWidth:0,plotBorderWidth:0,marginRight:0,width:t.width,height:t.height},tooltip:{enabled:!0,headerFormat:'<span style="font-size: 10px;padding-right:10px;">{point.key}</span>',pointFormat:"<b>{point.y}</b><br/>",valueSuffix:"%",useHTML:!0},legend:{enabled:!1},credits:{enabled:!1},title:{enabled:!1,text:""},yAxis:{lineWidth:0,opposite:!1,title:"",labels:{formatter:function(){return this.value+"%"}}},xAxis:{labels:{enabled:!0,font:"12px Helvetica",color:"#525151"},tickmarkPlacement:"on",categories:t.categories},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},series:[{type:"area",data:t.data}]})}yn.navigation.name=ynconfig.navigation.i;var c=n(1),d=n(2),u=n(8).track,l=n(11),m=n(12).handleData,f=n(7),p=(n(14),function(){var t=window.location.href.match(/([0-9]+).htm/);return+t[1]||"-1"}()),h=[],v=null,y=!!ynTeacherId&&+window.location.href.match(/([0-9]+)\.htm/)[1]==+ynTeacherId,g=yn.now({pad:!0}),b=Date.parse([g[0],g[1],g[2]].join("/")+" 09:30:00"),x=Date.parse([g[0],g[1],g[2]].join("/")+" 15:00:00"),k=function(t){var e=+v.combination_status;e=_.min([2,e]);var n=["组合正在预售中， "+v.starttime+"开始运行","组合正在运行中，"+t.msg,"组合已结束"][e];return'<div style="text-align:center;margin:100px 0;font-size:16px;color:gray"><span class="fa fa-dot-circle-o fa-lg" style="margin-right:5px"></span><span>'+n+"</span></div>"},w=function(t){return'<div style="text-align:center;margin:100px 0;font-size:16px;color:gray;width:100%"><span class="fa fa-dot-circle-o fa-lg" style="margin-right:5px"></span><span>'+t.msg+"</span></div>"},C={a:"暂时不能买入,等待开盘",b:"15:00以后不能交易",c:"该股票已经停盘,不能买卖",d:"买卖股票的数量必须是100的整数",e:"请输入买入价格",f:"请选择股票",g:"超出可卖数量"},S={};S.style=function(t){_.extend(this,t)},S.style.prototype={container:null,index:1,render:function(){this.container.html(this.html())},html:function(){var t=ynconfig.composite_style[+this.index],e=_.now();return'<span id="'+e+'" class="composite-style" data-value="'+t[0]+'">'+t[1]+"</span>"}},S.styleList=function(){var t=this,e=_.map(ynconfig.composite_style,function(e,n){return t.style(n)}).join("");return"<div>"+e+"</div>"};var D=function(t){var e=function(){return window.location.href=c.composite.portal()};$.ajax({type:"GET",data:{user_id:ynUserId,combinationid:p},url:"/combination/combinationProfile.htm",dataType:"json",success:function(n){return n.data&&1==+n.data.status?(n=m([n.data],"detail"),v=n[0],void t()):void e()},error:function(){e()}})},T=function(){var t;return{init:function(){t=$("#profile")},render:function(){t.html(template("profile-template",v)),R.render()}}}(),I=function(){var t,e,n,o,r=function(t){for(var e in t)"dealrecordCount"!=e&&(t[e]=yn.setDecimal(100*t[e],{math:"round"}));return t},a=function(t){return t.nowtotalrate=yn.color(t.nowtotalrate,{display:t.nowtotalrate+"%"}),'<div class="income-left">\n                    <div class="current"><span class="value">'+t.nowtotalrate+'</span><span class="txt">当前收益</span></div>\n                    <div class="other"><table><tr>\n                        <td><div class="value">'+t.maxtotalrate+'%</div><div class="txt">最大盈利</div></td>\n                        <td><div class="value">'+t.mintotalrate+'%</div><div class="txt">最小盈利</div></td>\n                        <td><div class="value">'+t.dealrecordCount+'</div><div class="txt">累计交易次数</div></td>\n                    </tr></table></div>\n                </div>\n                <div class="income-right" id="incomeChart"></div>'};return{init:function(){t=$(".stockIncome"),e=$("#incomeChart"),n=t.find(".items"),o=t.find(".menu"),o.on("click",".menu-2-item",function(){yn.switch($(this)),name=$(this).data("name"),I.render[name]()})},render:{income:function(){$.getJSON("/combination/MaxMinAndNowEarnings.htm",{teacherid:v.teacherid,combinationid:p},function(t){n.html(a(r(t)))}),i(function(t){t.container=$("#incomeChart"),s(t)})},feed:function(){return n.html(template("feed-template"))},refund:function(){return n.html(template("refund-template"))}}}}(),O=function(){var t,e,n;return{init:function(){var i=this;e={recordHistory:L,recordCurrent:N,recordChart:M},t=$("#stockRecord .menu"),n=$("#stockRecord .child"),t.on("click",".menu-2-item",function(){yn.switch($(this));var t=$(this).data("type");n.each(function(){var n=$(this).attr("id");t==n?(i.current=n,e[t].render()):$(this).hide()})})},current:null}}(),L=function(){var t,e,n,i=function(t){return _.chain(t).map(function(t){var e=["买入","卖出","未完成"][t.dealtype],n=t.dealtime.match(/[^\s]+/g);return t._date=n[0],t._time=n[1].match(/^\d+:\d+/)[0],t._deal=t.dealprice+"元"+e+t.dealnumber+"股",t._operate=t._time+'<span class="type'+t.dealtype+'">'+e+"</span>",t._change=yn.setDecimal(100*t.positionrate)+"%",t._profit=1==t.dealtype?"盈亏额："+t.profit+"元":"",t}).groupBy(function(t){return t._date}).map(function(t,e){return{time:e,values:t}}).value()};return{init:_.once(function(){var i=this;t=$("#recordHistory"),e=t.find(".items"),n=yn.bootpag(t),n.on("page",function(t,e){i.render({currentPage:e})}),t.on("click",".addStockBtn",function(){if(!ynIsLogin)return void yn.login.render();var t={stockname:$(this).data("name"),stockcode:$(this).data("code")};l.add(t)})}),render:function(o){t.show();var r={combinationid:p,pageSize:11,currentPage:1};return _.extend(r,o),ynIsLogin&&v.is_od?void $.getJSON("/simulatedStock/querysdlist.htm",r,function(t){console.log("--===---",t);var o=i(t.rows);if(o.length<1)return n.hide(),void e.html(ynconfig.none({margin:50}));e.html(template("recordHistory-template",o));var a=_.max([1,Math.ceil(+t.total/r.pageSize)]);n.show().bootpag({page:self.page,total:a})}):(n.hide(),void e.html(k({msg:"订阅后方可查看调仓记录"})))}}}(),N=function(){var t,e=$("#recordCurrent"),n=function(t){return'<tr class="body">\n            <td class="name">'+t.stockname+"("+t.stockcode+')</td>\n            <td class="price">'+t._current+'</td>\n            <td class="up">'+t._up+'</td>\n            <td class="cost">'+t._cost+'</td>\n            <td class="float">'+t._float+"</td>\n            <td>"+t.holdingsNumber+'</td>\n            <td class="store">'+t._holdRate+"</td>\n        </tr>"};return{init:function(){t=e.find("tbody")},render:function(){return e.show(),ynIsLogin&&v.is_od?(t.empty(),void o(function(e){return t.append(n(e))}).fail(function(){return e.html(ynconfig.none({margin:100}))})):void e.html(k({msg:"订阅后方可查看当前持仓记录"}))}}}(),M=function(){var t,e;return{init:function(){t=$("#recordChart"),e=t.find(".wrap"),V.publish.init({container:t.find(".publish-container")}),V.comments.init({container:t.find(".comments")})},render:function(){t.show();var e=new W({container:t.find(".impress"),clicked:!1}).render();V.comments.render(),e.clicked=!0}}}(),R=function(){var t,e={done:function(){return layer.msg("组合已经结束")},teacher:function(){return layer.msg("老师不能订阅")},login:function(){return yn.login.render()}};return{init:function(){t=$(".feedBar"),t.on("click",".toFeed",function(){var t=$(this).data("type"),n="peep"==t,i="done"==t,o=[{key:"login",assert:!ynIsLogin},{key:"done",assert:i},{key:"teacher",assert:!!ynTeacherId}],r=_.filter(o,function(t){return t.assert});if(r.length>0)return void e[r[0].key]();if(0===v.order_price)return void $.post("/app/freeSubscription.htm",{pay_source:0,combinationid:p},function(t){"success"==t?(layer.msg("组合订阅成功"),setTimeout(function(){return window.location.reload()},800)):layer.msg("组合订阅失败 : "+t)});var a=n?"peep_price":"order_price",s={pay_source:0,goodsId:p,goodsType:1,buy_number:1,_type:n?1:""};$.post("/app/buyGoodsPayOrder.htm",s,function(t){if(!t.data){var e=f[t.status];return void layer.msg("错误状态码: "+e+", 请刷新后再试")}var n=t.data.orderNum;d.render({name:"组合支付",price:v[a],link:"/html/returnshortcutpayJsp.htm?orderNum="+n,fail:function(t){return layer.msg("支付失败:"+t)},success:function(t){layer.msg("支付成功, 页面即将刷新"),setTimeout(function(){return window.location.reload()},1e3)}})},"json")})},render:function(){t.html(template("feedBar-template",v))}}}(),j=function(){var t,e,n;return{init:function(){t=$(".history"),e=t.find(".items"),n=t.find(".chart")},render:function(){e.html(template("history-template",v)),new u({container:n.find(".chart-item-1 .draw"),ratio:12.5,style:"ynui-bg-red"}).render(),new u({container:n.find(".chart-item-2 .draw"),ratio:22.1,style:"ynui-bg-green"}).render(),new u({container:n.find(".chart-item-3 .draw"),ratio:16.7,style:"ynui-bg-blue"}).render()}}}(),z=function(){var t,e=function(t){return t._wealthRatio=yn.setDecimal(+t.totalcapital/1e6),t};return{init:function(){t=$("#teacher-wealth")},render:function(){var n=this;$.getJSON("/simulatedStock/querysclist.htm?combinationid="+p,function(i){i=e(i),t.html(template("wealth-template",i)),n.done()})},done:function(){console.log("wealth done function not override...")}}}(),U=function(){var t,e;return{init:function(){t=$("#teacherContent .intro"),e=new yn.loading({container:t}),e.render()},render:function(){$.getJSON("/combination/combinationOrderUser.htm",{combinationid:p,pageSize:1,currentPage:1},function(e){v._feedCount=e.total,t.html(template("teacherContent-intro-template",v))})}}}(),F=function(){var t,e=function(t){return t=_.extend({firstTradingTime:"---",lastTradingTime:"---",mothrate:"---",weekrate:"---",dayrate:"---",maxEarnings:"---",winrate:"---"},t),t.firstTradingTime=t.firstTradingTime.match(/^[^\s]+/)[0],t.lastTradingTime=t.lastTradingTime.match(/^[^\s]+/)[0],t.mothrate=yn.setDecimal(t.mothrate),t.weekrate=yn.setDecimal(100*t.weekrate),t.dayrate=yn.setDecimal(100*t.dayrate),t.maxEarnings=yn.setDecimal(100*t.maxEarnings),t.winrate=yn.setDecimal(t.winrate),t};return{init:function(){t=$("#profit-income")},render:function(){var n=this;$.getJSON("/simulatedStock/queryserlist.htm",{teacherid:v.teacherid,combinationid:p},function(i){i=e(i),t.html(template("profit-template",i)),n.done(i)}),i(function(t){t.container=$("#incomeLineChart"),t.width=590,t.height=240,s(t)})},done:function(t){$(".dayrate").text(t.dayrate+"%"),$(".weekrate").text(t.weekrate+"%")}}}(),J=(function(){return{render:function(){$.getJSON("/combination/shK.htm",function(t){t&&t.sh300&&(t=t.sh300)})}}}(),function(){var t,e,n,i={};return{init:function(){var o={simulate_buy:P,simulate_hold:A,simulate_sell:B,simulate_rollback:H,simulate_history:q,simulate_talk:V};t=$("#simulate_menu"),e=$("#simulateBar .child"),n=t.find(".menu-item"),n.click(function(){yn.switch($(this));var t=$(this).data("value");i.text=$(this).text(),i.value=t,e.each(function(){$(this).attr("id")==t?o[t].render():$(this).hide(),E.hide()})})},select:function(t){i.text!=t&&n.each(function(){$(this).text()==t?$(this).addClass("select"):$(this).removeClass("select")})}}}()),A=function(){var t,e,n=0,i={},r=function(t){var e="<tr data-i="+n+'>\n            <td class="name">'+t.stockname+'</td>\n            <td class="code">'+t.stockcode+'</td>\n            <td class="price">'+t._current+'</td>\n            <td class="up">'+t._up+'</td>\n            <td class="holdCount">'+t.holdingsNumber+'</td>\n            <td class="cost">'+t.cost+'</td>\n            <td class="float">'+t._float+'</td>\n            <td class="holdRate">'+t._holdRate+'</td>\n            <td class="action buy"><button>买入</button></td>\n            <td class="action sell"><button>卖出</button></td>\n        </tr>';return i[n]=t,n++,e};return{init:function(){t=$("#simulate_hold"),e=t.find("tbody"),t.on("click",".action.buy",function(){var e=$(this).parents("tr").data("i"),n=i[e];t.hide(),P.render({data:n})}),t.on("click",".action.sell",function(){var e=$(this).parents("tr").data("i"),n=i[e];t.hide(),B.render({data:n})})},render:function(){return 0==v.combination_status?void t.show().html(w({msg:"组合尚未运行"})):(J.select("持仓"),t.show(),e.empty(),n=0,void o(function(t){return e.append(r(t))}).fail(function(){return t.html(ynconfig.none())}))}}}(),E=function(){var t,e;return{data:null,isStop:!1,init:function(){var n=this;t=$("#realtimeContainer"),setInterval(function(){e&&n.render(e)},5e3)},render:function(n,i){e=n;var o=this;yn.queryStock(e,{handle:!0,color:!0}).done(function(e){o.isStop="3.00"==e[32],t.show().html(template("realtime-template",{responding:e}));var e=_.map(e,function(t){return yn.filterHTML(t+"")});i&&i(e),o.onChange(e),o.data=e})},hide:function(){e=null,t.hide(),self.isStop=!1},onChange:function(){}}}(),P=function(){var t,e,n,i,o,r,a,s,c,d,u,l=function(){a.hide(),e.removeAttr("readonly"),s.text(""),c.text(""),t.find("input").val(""),d.text("0.00"),u.text("0.00"),E.hide(),r.hide()},m=function(t,n){e.val("").attr("readonly","true"),a.show(),s.text(t),c.text(n)};return{init:function(){t=$("#simulate_buy"),e=$("#buy-stock-code"),n=$("#buy-price"),i=$("#buy_avaliable"),o=$("#buy-count"),r=$("#buy-maxCount"),a=$("#buy-select"),s=a.find(".code"),c=a.find(".name"),d=$("#buy-price-max"),u=$("#buy-price-min");var f=0,h=null,v=function(t){var e=+u.text(),i=+d.text();return t>i||t<e?(layer.msg("不能高于涨停价格/不能低于跌停价格"),void n.val(h)):(t=Math.round(100*t)/100,n.val(t),void(h=t))};yn.showStockList(e,{onSelect:function(t){E.render(t.stockCode,function(t){n.val(t[3])}),m(t.stockCode,t.stockName)}}),a.find(".icon").click(function(){l()}),n.change(function(){v($(this).val())}),$("#buy-price-minus-btn").click(function(){v(+n.val()-.01)}),$("#buy-price-plus-btn").click(function(){v(+n.val()+.01)}),setTimeout(function(){i.text($("#wealth-avaliable").text())},1e3),o.change(function(){var t=+$(this).val();t>f&&(layer.msg("最多可购买"+f),$(this).val(f))}),o.focus(function(){var t=+n.val();return t?(f=Math.floor(+i.text()/t),void r.show().html("最多可买"+f+"股")):(layer.msg("请先输入买入价格"),void $(this).val(""))}),t.on("click",".limit-item",function(){var t=+$(this).data("value"),e=Math.floor(+i.text()/+n.val()),r=100*Math.floor(e*t/100);o.val(r)}),$("#submit-buy").click(function(){var t=_.now(),e=o.val(),i=n.val(),r=s.text(),a=c.text(),d=[{key:"a",assert:t<b},{key:"b",assert:t>x},{key:"c",assert:E.isStop},{key:"f",assert:!r},{key:"d",assert:!e||e%100!==0},{key:"e",assert:!i}],u=_.filter(d,function(t){return t.assert});if(u.length>0)return void layer.msg(C[u[0].key]);var l={stockcode:r,price:i,entrustnumber:e,dealtype:0,stockname:a,currentPrice:E.data[3],combinationid:p};$.post("/simulatedStock/buyIn.htm",l,function(t){return"success"==t?(layer.msg("成功买入"),void setTimeout(function(){window.location.reload(),500})):void("15"==t&&layer.alert("当前老师未初始化资金"))})})},render:function(e){return 1!=v.combination_status?void t.show().html(w({msg:"仅运行中的组合，才能进行买入操作"})):(J.select("买入"),e=_.extend({data:null},e),t.show(),l(),E.onChange=function(t){d.text(yn.setDecimal(1.1*t[1])),u.text(yn.setDecimal(.9*t[1]))},void(e.data&&(m(e.data.stockcode,e.data.stockname),E.render(e.data.stockcode),n.val(e.data.nowprice))))}}}(),B=function(){var t,e,n,i,o,r,a,s,c,d=function(t){$.get("/simulatedStock/getMostSellOut.htm",{stockcode:t,combinationid:p},function(t){c.text(t)})},u=function(t){t=+t,n.val(t);var e=yn.setDecimal(.9*t),i=yn.setDecimal(1.1*t);o.show(),r.text(e),a.text(i)},l=function(t){var e=+r.text(),i=+a.text();if(t<e||t>i)return layer.msg(t+"价格超过范围"),void n.val()};return{init:function(){t=$("#simulate_sell"),e=t.find("select"),n=$("#sell-price"),i=$("#sell-count"),o=t.find(".price-tip"),r=t.find(".price-min"),a=t.find(".price-max"),s=t.find(".count-tip"),c=t.find(".count-max"),e.change(function(){var t=$(this).val();E.render(t,function(t){u(t[3])}),d(t)}),t.find(".price-calculate .item").click(function(){var t=parseFloat($(this).data("value")),e=+n.val(),i=yn.setDecimal(e+t,{math:"round"});l(i)}),n.change(function(){var t=+$(this).val();l(t)}),i.change(function(){var t=+c.text(),e=+$(this).val();(!/^[1-9]\d*$/.test(e)||e<0||e>t)&&(layer.msg("超出可卖数量"),$(this).val(""))}),t.find(".count-calculate .item").click(function(){var t=+$(this).data("value"),e=+c.text();i.val(100*Math.floor(Math.floor(e*t)/100))}),t.find(".submit").click(function(){var o=_.now(),r=+i.val(),a=[{key:"a",assert:o<b},{key:"b",assert:o>x},{key:"c",assert:E.isStop},{key:"d",assert:!r||r%100!==0},{key:"g",assert:r>+c.text()}],s=_.filter(a,function(t){return t.assert});if(s.length>0)return void layer.msg(C[s[0].key]);var d={stockcode:e.val(),stockname:e.find("option:selected").text(),entrustnumber:r,price:+n.val(),currentPrice:E.data[3],dealtype:1,combinationid:p};$.post("/simulatedStock/sellOutstock.htm",d,function(e){return"success"==e?(layer.msg("卖出成功"),t.hide(),E.hide(),void A.render()):void layer.msg("卖出操作失败")})})},render:function(n){if(1!=v.combination_status)return void t.show().html(w({msg:"仅运行中的组合，才能进行卖出操作"}));if(J.select("卖出"),h.length<1)return void layer.msg("没有股票可以卖出!");t.show(),n=_.extend({data:h[0]},n);var o=n.data;e.html(_.map(h,function(t){return'<option value="'+t.stockcode+'">'+t.stockname+"</option>"}).join("")),e.val(o.stockcode),E.render(o.stockcode,function(t){u(t[3])}),d(o.stockcode),i.val("")}}}(),H=function(){var t,e;return{init:function(){t=$("#simulate_rollback"),t.on("click",".action.rollback",function(){var t=$(this).parents("tr"),n=t.index()-1,i=e[n],o={stockcode:i.stockcode,billno:i.billno,stockname:i.stockname,id:i.id,price:i.price,entrustnumber:i.entrustnumber,dealtype:i.dealtype,combinationid:p};$.post("/simulatedStock/returnstockback.htm",o,function(e){"success"==e?(layer.msg("撤单成功"),t.remove()):layer.msg("error "+e)})})},render:function(){return 0==v.combination_status?void t.show().html(w({msg:"组合尚未运行"})):(J.select("撤单"),t.show(),void $.getJSON("/simulatedStock/queryselist.htm?combinationid="+p,function(n){return n.length<1?void t.html(ynconfig.none({margin:100})):(e=n,void t.html(template("simulate-rollback-template",e)))}))}}}(),q=function(){var t,e,n,i=function(t){return _.map(t,function(t){return t._type=["买入","卖出","未完成"][t.dealtype],t._time=yn.timeFormat(t.dealtime),t._profit=["---",t.profit+"元"][t.dealtype],t})};return{page:1,row:20,init:function(){var i=this;t=$("#simulate_history"),e=t.find(".items"),n=yn.bootpag(t),n.on("page",function(t,e){i.page=e,i.render()})},render:function(){if(0==v.combination_status)return void t.show().html(w({msg:"组合尚未运行"}));var o=this;J.select("查询"),t.show(),$.getJSON("/simulatedStock/querysdlist.htm",{combinationid:p,pageSize:o.row,currentPage:o.page},function(t){var r=i(t.rows);e.html(template("simulate-history-template",r));var a=_.max([1,Math.ceil(+t.total/o.row)]);n.bootpag({page:o.page,total:a})})}}}(),W=function(t){_.extend(this,t)};W.prototype={container:null,width:120,clicked:!0,render:function(){var t=this,e=function(t){$.getJSON(" /composite/statisticsZan.htm",{combinationid:p},function(e){var n=[{name:"技术高",id:0,count:e.jsgcount,color:"#5ab0ee"},{name:"收益稳",id:1,count:e.sywcount,color:"#ea7a81"},{name:"选股准",id:2,count:e.xgzcount,color:"#937fbb"},{name:"回复快",id:3,count:e.hfkcount,color:"#2fc1db"},{name:"一般般",id:4,count:e.ybbcount,color:"#f3ae76"}];t(n)})},n=function(e){var n=0,i=0;return _.forEach(e,function(t){i+=t.count,n=_.max([n,t.count])}),_.map(e,function(e){var n=function(){if(i<12)return 10*e.count;var n=e.count/i||0;return n*t.width}(),o=Math.floor(60+n),r=_.min([Math.floor(o/60*12),30]),a="background:"+e.color+";width:"+o+"px;height:"+o+"px;";return'<div class="inline item">\n                             <div class="graph" style="'+a+'" data-id="'+e.id+'">\n                                <div class="wrap" style="line-height:'+o+"px;font-size:"+r+'px;">\n                                 <span class="count">'+e.count+'</span>\n                                 <span class="txt">人</span>\n                                </div>\n                             </div>\n                            <button style="color:'+e.color+';">'+e.name+"</button>\n                        </div>"}).join("")};return e(function(e){t.container.html(n(e))}),this.container.on("click",".graph",_.once(function(){if(v.is_od&&t.clicked){$(this).velocity("callout.tada");var e=+$(this).data("id");$.post("/composite/addZan.htm",{combinationid:p,type:e},function(e){"success"==e?setTimeout(function(){t.render()},500):layer.msg("您已经点过赞啦!")})}})),this}};var V=function(){var t;return{init:function(){t=$("#simulate_talk"),this.publish.init({container:t.find(".publish-container")}),this.comments.init({container:t.find(".comments")})},render:function(){return t.show(),0==v.combination_status?void t.html(w({msg:"组合尚未运行"})):(this.comments.render(),void new W({container:$("#simulate_talk .impress"),clicked:!1}).render())}}}();V.publish=function(){var t,e,n,i,o,r="";return{setReply:function(t,e){o.show(),o.find(".name").text(t),r=e},init:function(a){function s(){o.hide(),o.find(".name").text(""),r=""}t=a.container;var c=template("publish-template");t.html(c),e=t.find("textarea"),n=t.find(".insertCode"),i=t.find(".submit"),o=t.find(".reply"),yn.wordCount(e,{indicate:t.find(".wordCount .value")}),yn.showStockList(n,{onSelect:function(t){var i=e.val();i+=t.stockWrap,e.val(i).trigger("keyup"),n.val("")}}),o.on("click",".fa",function(){return s(),!1}),i.click(_.debounce(function(){return ynIsLogin?e.val()?void d():void layer.msg("内容不能为空!"):void yn.login.render()},3e3,{leading:!0,trailing:!1}));var d=function(){var t={parent_id:r,combinationid:p,content:e.val(),create_id:ynUserId};$.post("/composite/addComment.htm",t,function(t){return"success"!=t?void layer.msg(""+t):(e.val("").trigger("keyup"),layer.msg("发布成功..."),s(),void V.comments.render({currentPage:1}))})}}}}(),V.comments=function(){var t,e,n,i,o;return{init:function(r){var a=this;t=r.container,e=t.find(".items"),i=t.find(".comments-filter"),n=yn.bootpag(t),n.on("page",function(t,e){a.render({currentPage:e})}),o=new yn.loading({container:e}),t.on("click",".reply",function(){var t=$(this).data("name"),e=$(this).data("id");V.publish.setReply(t,e)}),i.on("click",".comments-filter-item",function(){yn.switch($(this));var t=$(this).data("value");a.render({type:+t,currentPage:1})}),t.on("click",".setHide",function(){var t=($(this),$(this).data("id")),e=(+$(this).data("type")+1)%2;$.post("/composite/commentHide.htm",{comment_id:t,hide:e},function(t){"success"==t&&(layer.msg("设置成功"),a.render())})})},render:function(i){if(!v.is_od){var r=w({msg:"订阅后可以查看和发表评论"});return void t.html(r)}var a=_.extend({combinationid:p,user_id:ynUserId,type:0,pageSize:10,currentPage:1},i);o.render();var s=[],c={},d=function t(e){_.forEach(e,function(e){e.parent_id?(e._level=c[e.comment_id]=c[e.parent_id]+1,e._subLevel="subLevel"):(c[e.comment_id]=0,e._subLevel=""),e._hideText="1"===e.is_hide?"已隐藏":"隐藏",e._hideTextStyle=v.teacherid==ynTeacherId?"":"hide",s.push(e),e.childList.length>0&&t(e.childList.reverse())})};$.getJSON("/composite/commentList.htm",a,function(t){if(t.rows.length<1)return void e.html(ynconfig.none({margin:100}));d(t.rows),e.html(template("simulate_talk-comments-template",s));var i=_.max([1,Math.ceil(+t.total/a.pageSize)]);n.bootpag({page:a.currentPage,total:i})})}}}(),$(function(){y?a():r()})},function(t,e){"use strict";var n={composite:live_path+"/html/liveDetail_composite.htm"};t.exports={composite:{portal:function(){return __path+"/html/returnCompositeJsp.htm"},detail:function(t,e){return e=e||"YN",__path+"/html/CompositeDetail.htm?"+e+"ZHXQ"+t},create:function(t){return t="?EDIT"+t||"",__path+"/html/compositeCreate.htm"+t}},live:{detail:function(t){return n[t]},refer:function(t){return live_path+"/live/liveDetailRefer.htm?teacherid="+t}},refer:{detail:function(t){return __path+"/referp/list.htm?referenceid="+t}},pay:function(t){return __path+"/html/returnshortcutpayJsp.htm?orderNum="+t},video:{portal:video_path+"/video/index.htm",detail:function(t){return video_path+"/video/detail.htm?videoId="+t}},center:{stock:__path+"/myCenter/myCenter.htm"},news:{portal:news_path+"/article/index.htm"},opinion:{portal:opinion_path+"/opinion",detail:function(t){return opinion_path+"/opinion/"+t+".htm"}}}},function(t,e,n){"use strict";n(3);var i=(n(7),function(){return'<div class="pay-confirm-overlay hide">\n    <div class="pay-confirm-box">\n        <div class="title">支付确认</div>\n        <span class="close fa fa-times-circle"></span>\n        <div class="content">\n            <div class="pay-item pay-item-confirm">\n                <div class="payment">\n                    <div class="name">支付项目：<span class="value" style="color:red"></span></div>\n                    <div class="price">价格：<strong class="value"></strong>元</div>\n                    <div class="submits">\n                        <a id="pay-confirm-link" class="pay-btn jump" href="" target="_blank">立即支付</a>\n                    </div>\n                </div>\n            </div>\n            <div class="pay-item pay-item-tip hide">\n                <div class="payment">\n                    <p>支付完成前，请不要关闭此支付验证窗口</p>\n                    <p><strong>请在2小时内支付，超时将关闭订单；</strong></p>\n                    <div class="submits">\n                        <a class="wrong pay-btn" href="http://www.yuetougu.com/helpcenter.htm" target="_blank">支付遇到问题</a>\n                        <a class="finish pay-btn">支付完成</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),o=function(){var t,e,n,o,r,a,s,c={name:"支付名称",price:0,link:"#",success:function(){layer.msg("支付成功")},fail:function(){layer.msg("支付失败")}};return{init:function(){$("body").append(i()),t=$(".pay-confirm-overlay"),e=t.find(".pay-confirm-box"),n=$(".pay-item-confirm"),o=t.find(".pay-item-tip"),r=t.find(".name .value"),a=t.find(".price .value"),s=$("#pay-confirm-link"),t.on("click",".close",function(){$.post("/web/getPayStatus.htm",function(e){"1"==e||"6"==e?c.success():t.hide()})}),t.on("click",".jump",function(){n.hide(),o.show()}),o.on("click",".finish",function(){$.post("/web/getPayStatus.htm",function(t){"1"==t||"6"==t?c.success():c.fail(t)})})},render:function(n){_.extend(c,n),t.show(),e.velocity("transition.expandIn",{duration:300}),r.text(c.name),a.text(c.price),s.attr("href",c.link)}}}();o.init(),t.exports={render:o.render}},function(t,e,n){var i=n(4);"string"==typeof i&&(i=[[t.id,i,""]]);n(6)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(5)(),e.push([t.id,".pay-confirm-overlay{width:100%;height:100%;position:fixed;left:0;top:0;background:#f5f5f5;background:hsla(0,0%,96%,.7);text-align:center;z-index:10000}.pay-confirm-box{display:inline-block;background:#fff;border-radius:3px;position:relative;width:500px;text-align:left;margin:auto;margin-top:200px;box-shadow:7px 4px 20px 0 hsla(0,0%,65%,.38)}.pay-confirm-box .title{text-align:left;padding:10px 20px;font-size:15px;border-bottom:1px solid #dbdbdb}.pay-confirm-box .content{padding:30px}.pay-confirm-box .close{position:absolute;top:8px;right:10px;font-size:25px;cursor:pointer}.payment{background:url(/public/images/payment.png) no-repeat;padding-left:120px;min-height:94px}.payment .name{font-size:16px;margin-bottom:5px}.payment .price{margin-bottom:10px;font-size:15px}.payment .price .value{color:red}.payment .submits{text-align:right;margin-top:25px}.payment .pay-btn{padding:6px 20px;border-radius:2px;background:#d72621;color:#fff;font-size:16px}.pay-item-tip .submits{text-align:left}.pay-item-tip p{margin-bottom:5px}.pay-item-tip .wrong{background:#a3a2a2}.finish{background:#f6554a}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=f[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(d(i.parts[r],e))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(d(i.parts[r],e));f[i.id]={id:i.id,refs:1,parts:a}}}}function o(t){for(var e=[],n={},i=0;i<t.length;i++){var o=t[i],r=o[0],a=o[1],s=o[2],c=o[3],d={css:a,media:s,sourceMap:c};n[r]?n[r].parts.push(d):e.push(n[r]={id:r,parts:[d]})}return e}function r(t,e){var n=v(),i=b[b.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),b.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function a(t){t.parentNode.removeChild(t);var e=b.indexOf(t);e>=0&&b.splice(e,1)}function s(t){var e=document.createElement("style");return e.type="text/css",r(t,e),e}function c(t){var e=document.createElement("link");return e.rel="stylesheet",r(t,e),e}function d(t,e){var n,i,o;if(e.singleton){var r=g++;n=y||(y=s(e)),i=u.bind(null,n,r,!1),o=u.bind(null,n,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(e),i=m.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),i=l.bind(null,n),o=function(){a(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}function u(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=x(e,o);else{var r=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function l(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function m(t,e){var n=e.css,i=e.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var f={},p=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},h=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=p(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,g=0,b=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=h()),
"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=o(t);return i(n,e),function(t){for(var r=[],a=0;a<n.length;a++){var s=n[a],c=f[s.id];c.refs--,r.push(c)}if(t){var d=o(t);i(d,e)}for(var a=0;a<r.length;a++){var c=r[a];if(0===c.refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete f[c.id]}}}};var x=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){"use strict";t.exports={1:"请求成功","-1":"请求繁忙",10001:"股票代码不存在",10002:"查询条件为空",20001:"登录失效",20002:"token为空",20003:"用户名不存在",20004:"密码为空",20005:"密码不匹配",20006:"登录失败",20007:"用户不存在",20008:"操作失败",20009:"密码不一致",20010:"TOKEN 错误",20011:"参数错误",20012:"获取验证码失败",20013:"期刊ID为空",20014:"直播室ID为空",20015:"提问内容为空",20016:"直播室未开启",20017:"直播老师未关联直播室",20018:"期刊不存在",20019:"已在其他终端登陆",20020:"提问次数超出限制",20021:"该条问题已被采纳过",20022:"不是该问题提问人",30001:"手机验证码为空",30002:"验证码错误",30003:"手机验证码错误",30004:"账号已存在",30005:"注册异常",30006:"第三方第一次登录",30007:"第三方非法用户",30008:"手机号为空",30009:"手机号已被绑定",30010:"手机号错误",40001:"参数为空",40002:"服务器异常",40003:"已点赞",40004:"评论失败",40005:"起始值为空",40006:"查询失败",40007:"请求方向格式错误",40008:"用户自选股已经存在",40009:"关注",40010:"没有此股票信息",40011:"取消关注",40012:"直播老师不存在",40013:"股票代码和名称不匹配",40014:"买入股票时资本不够",50001:"消息为空",60000:"支付成功",60001:"商品ID为空",60002:"商品类型为空",60003:"订单类型为空",60004:"订单ID为空",60005:"订单不存在",60006:"支付失败",60007:"签名为空",60008:"未传支付密码",60009:"支付密码错误",60010:"账户余额不足",60011:"用户没有开通账户",60012:"支付密码格式不正确",60013:"充值来源错误",60014:"订单金额类型不存在",60015:"订单金额错误",60016:"产品购买数量错误",60017:"礼物不存在",60018:"商品类型不存在",60019:"商品不存在",60020:"商品已购买",70001:"组合不存在",70002:"组合已技术评价",70003:"收益信息为空",70004:"委托记录为空"}},function(t,e,n){"use strict";n(9);var i=function(t){_.extend(this,t)};i.prototype={container:null,ratio:0,height:8,trackColor:"#ddd",trainColor:"red",style:"",render:function(){var t=this,e=_.now(),n=function(){var n="";return t.style&&(n=t.style.replace("bg-","")),'<div class="ynui-track-item">\n                        <div class="ynui-track" style="height:'+t.height+"px;background:"+t.trackColor+';">\n                            <div id="'+e+'-train" class="ynui-train '+t.style+'" style="width:0%;background:'+t.trainColor+";height:"+t.height+'px;"></div>\n                        </div>\n                        <div class="ynui-track-text '+n+'" id="'+e+'-text">'+t.ratio+"%</div>\n                    </div>"}();this.container.append(n),$("#"+e+"-train").velocity({width:this.ratio+"%"},{duration:"500"})}},t.exports={track:i}},function(t,e,n){var i=n(10);"string"==typeof i&&(i=[[t.id,i,""]]);n(6)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(5)(),e.push([t.id,".ynui-track-item{display:inline-block;margin:5px 0;padding:0 50px 0 5px;position:relative;min-width:200px}.ynui-track-text{position:absolute;right:7px;top:-7px;font-size:12px}.ynui-track{border-radius:5px;overflow:hidden}.ynui-bg-red{background:#ff4e50!important;@background: -webkit-linear-gradient(to left,#FF4E50,#F9D423) !important;@background: linear-gradient(to left,#FF4E50,#F9D423) !important}.ynui-bg-blue{background:#02aab0!important;@background: -webkit-linear-gradient(to left,#02AAB0,#00CDAC) !important;@background: linear-gradient(to left,#02AAB0,#00CDAC) !important}.ynui-bg-green{background:#56ab2f!important;@background: -webkit-linear-gradient(to left,#56ab2f,#a8e063) !important;@background: linear-gradient(to left,#56ab2f,#a8e063) !important}.ynui-bg-black{background:#859398!important;@background: -webkit-linear-gradient(to left,#283048,#859398) !important;@background: linear-gradient(to left,#283048,#859398)!important}.ynui-black{color:#859398!important}.ynui-red{color:#ff4e50!important}.ynui-blue{color:#02aab0}.ynui-green{color:#56ab2f!important}",""])},function(module,exports){"use strict";var add=function(t,e){var n=$.Deferred();return e=_.extend({user_id:ynUserId},e),t&&t.stockname&&t.stockcode?(t.user_id=e.user_id,module.exports.get(t.user_id).done(function(e){var i=!0;_.forEach(e,function(e){+e.stockcode==+t.stockcode&&(layer.msg("已存在"),i=!1)}),i&&$.post("/addOpStock.htm",t,function(t){"success"==t?(layer.msg("添加自选成功"),n.resolve()):"40008"==t?layer.msg("已存在"):(layer.msg("添加自选股失败..."),n.reject())})}),n.promise()):void console.log("添加自选参数错误",t)},remove=function(t,e){var n=$.Deferred();return e=_.extend({user_id:ynUserId}),t.user_id=e.user_id,!t&&!t.stockname&!stockCode&&!t.id?void layer.msg("参数错误"):($.get("/deleteOpStock.htm",t,function(e){"success"==e?n.resolve(t.stockCode):(layer.msg("删除自选股失败..."),n.reject(t.stockCode))}),n.promise())},get=function get(ops){function handleItem(item){var data=eval(item.stockInfo),open=yn.setDecimal(+data[1]),yesterday=data[2],now=yn.setDecimal(data[3])||open,high=data[4],low=data[5],up=yn.setDecimal((now-yesterday)/yesterday*100),money=yn.setDecimal(now-yesterday),result={stockcode:item.stockcode,stockname:item.stockname,stockid:item.id,now:yn.colorValue(now,{left:now-open}),money:yn.colorValue(money),up:yn.colorValue(up,{suffix:"%"}),yesterday:yn.setDecimal(yesterday),open:yn.setDecimal(open),max:yn.setDecimal(high),min:yn.setDecimal(low)};return result}ops=_.extend({userid:ynUserId});var defer=$.Deferred();return $.getJSON("/queryOp.htm",{user_id:ops.userid},function(t){t=_.chain(t).filter(function(t){return t.stockInfo}).map(function(t){return handleItem(t)}).value(),defer.resolve(t)}),defer.promise()};module.exports={add:add,get:get,remove:remove}},function(t,e,n){"use strict";var i=n(13),o=function(t){return t.match(/^[^\s]+/)[0]},r=[[0,"预售中"],[1,"进行中"],[2,"已结束"]],a=[[0,"保守型"],[1,"稳健性"],[2,"激进型"]],s={end:function(t){return"<a "+t.link+' class="ynbtn toFeed done" data-type="done">已结束</a>'},feed:function(t){return"<a "+t.link+' class="ynbtn toFeed">订阅</a>'},feeded:function(t){return'<a class="ynbtn" data-type="feeded">已订阅</a>'},look:function(t){return"<a "+t.link+' class="ynbtn toFeed">查看详情</a>'},peep:function(t){return"<a "+t.link+' class="ynbtn toFeed" data-type="peep">'+t.peepText+"瞄一眼</a>"},bottom:function(t){return"<a "+t.link+' class="ynbtn toFeed" data-type="bottom">已结束</a>'}},c=function(t,e){var n="detail"==e;return _.map(t,function(t){var e=+t.combination_status,c=0===e,d=1===e,u=6===e,l=e>2,m=_.min([e,2]),f=1==+t.is_od,p=ynTeacherId==t.teacherid,h=0===+t.order_price,v={link:n?"":'href="/combination/'+t.combinationid+'.htm" target="_blank"',peepText:n?+t.peep_price+"牛币· ":""},y=o(t.systemTime),g=o(t.starttime),b=o(t.endtime),x=new i(g),k=new i(b);return t._style=a[t.combination_style][1],t._content=t.combination_des.substr(0,30)+"...",t._incomeText=["目标收益","当前收益","最终收益"][m],t._income=function(){var e=c?t.target_revenue:t.now_revenue,n=yn.setDecimal(e);return 0===parseFloat(n)?'<span style="color:rgb(102,102,102)">0.00%</span>':yn.color(n,{display:n+"%",upColor:"red"})}(),t._state=r[m][1],t._stateValue=r[m][0],t._endStyle=e>2?"isEnd":"",t._price=0===+t.order_price?"免费":"￥"+t.order_price,t._icon=["ready","running","success"][m],t._status=e,t._runRatio=function(){if(c)return 0;var t=new i(y),e=k.offset(g);return Math.ceil(t.offset(g)/e*100)}(),t._time=function(){var n=[function(t){return"<strong>"+(t.count-1)+"</strong>天后运行"},function(t){return"已经运行<strong>"+t.count+"</strong>天"},function(t){return"共运行<strong>"+t.runCount+"</strong>天"}];return n[m]({count:_.min([Math.abs(x.offset(y))+1,t.combination_maxterm]),runCount:function(){if(e>2){var n=new i(o(t.completetime));return n.offset(g)+1}}()})}(),t._feed=function(){var t=[{key:"end",assert:e>=2},{key:"bottom",assert:u},{key:"feeded",assert:f&&n},{key:"look",assert:p||f&&!l},{key:"peep",assert:d&&!f&&!h},{key:"feed",assert:!0}],i=_.filter(t,function(t){return t.assert});return s[i[0].key](v)}(),t})};t.exports={handleData:c}},function(t,e){"use strict";var n=function(){return(new Date).getTime()},i=function(t){return t.match(/^(20[12]\d)[\/\-]([01]*[0-9])[\/\-](\d+)/)},o=function(t){var e=_.map(t,function(t){return _.padLeft(t,2,"0")}).join("/")+" 00:00:00";return Date.parse(e)},r=function(t){this.stamp=function(){if("string"!=typeof t)return void console.log(t+"不是字符类型");if(!i(t))return void console.log(t+"格式不正确");var e=i(t),n=o([e[1],e[2],e[3]]);return n?n:void console.log(t+"不是有效的日期")}()};r.prototype={add:function(t){var e=function(){return 864e5*t}(),n=this.stamp+e,i=new Date(n),o=i.getFullYear(),r=function(){var t=+i.getMonth()+1;return t<10&&(t="0"+t),t}(),a=i.getDate();return[o,r,a].join("-")},offset:function(t){var e=t&&new r(t).stamp+1||n();return Math.floor((this.stamp-e)/864e5)+1}},t.exports=r},function(t,e,n){"use strict";function i(t){return t.content=t.content.substr(0,18)+"...",'<div class="message-item" id='+t.id+'>\n        <span class="message-item-icon type'+t.type+'"></span>\n        <a href="'+t.link+'" class="message-item-info" target="_blank">\n            <div class="title">'+t.title+'</div>\n            <div class="content">'+t.content+'</div>\n        </a>\n        <span class="message-item-close message-item-icon"></span>\n    </div>'}n(15),t.exports=function(t){this.id=(new Date).getTime(),_.extend(this,t),this.render()},t.exports.prototype={container:null,type:0,title:"",content:"",link:"",dismiss:!1,render:function(){$("#message-item-container").get(0)||$("body").append('<div id="message-item-container"></div>'),this.container=$("#message-item-container"),this.container.append(i(this));var t=$("#"+this.id);t.velocity("transition.slideRightBigIn",{duration:300});var e=function(){return t.velocity("transition.fadeOut",{duration:300})};t.on("click",".message-item-close",function(){return e()}),this.dismiss&&setTimeout(function(){return e()},this.dismiss)}}},function(t,e,n){var i=n(16);"string"==typeof i&&(i=[[t.id,i,""]]);n(6)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(5)(),e.push([t.id,"#message-item-container{position:fixed;right:20px;top:100px;z-index:1000}.message-item{padding:10px;overflow:hidden;background:#fff;box-shadow:0 3px 10px rgba(0,0,0,.1);border:1px solid #f5f5f5;margin-bottom:10px;z-index:1000}.message-item-info{width:255px;margin:0 10px}.message-item-close{background-position:-120px 0}#message-item-container{position:fixed;right:20px;top:100px}.message-item{padding:10px;overflow:hidden;background:#fff;box-shadow:0 3px 10px rgba(0,0,0,.1);border:1px solid #c8c8c8}.message-item>*{float:left}.message-item-icon{width:40px;height:40px;display:inline-block;background:#f5f5f5;position:relative;background:url(/public/icons/ynicons-01.png)}.message-item-icon.type1{background-position:0 0}.message-item-info{width:220px;margin:0 10px;cursor:pointer;display:block}.message-item-info .title{font-size:15px;margin-bottom:2px}.message-item-info .content{color:gray}.message-item-close{background-position:-80px 0;cursor:pointer}",""])}]);