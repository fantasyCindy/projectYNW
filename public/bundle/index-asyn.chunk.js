webpackJsonp([1],[,,,,,function(e,t,n){"use strict";function i(){var e=this;d=$("#askTeacherWindow"),u=$("#questionField"),x.init(),y.init(),w.init(),k.init(),b.init(),m.init(),T.init(),s(),l(),d.on("click",".close-win",function(){d.hide(),o()}),x.onChange=function(e){return k.render(e)},x.onMax=function(){return k.hide()},k.onSelect=function(e){return x.append({id:e.id,name:e.name})},b.onSelect=function(e){return x.append({id:e.id,name:e.name})},d.on("click",".submit button",function(){var t={seachBar:function(){return layer.msg("请选择投资顾问")},textarea:function(){return layer.msg("请输入您的问题")}},n=[{key:"seachBar",assert:x.assert()},{key:"textarea",assert:y.assert()}],i=_.find(n,function(e){return e.assert});if(i)return void t[i.key]();if(y.getValue().trim().length<3)return layer.msg("提问至少3个字");d.hide();var r={questionuserid:ynUserId,teacherids:x.getValue(),questioncontent:y.getValue(),stockcode:w.getValue().code,stockname:w.getValue().name,note_source:0};$.post("/consultation/questionNote.htm",r,function(t){"success"==t?(layer.msg("提问成功, 牛人正在为您解答!"),e.onClick&&e.onClick({success:"success"})):layer.msg(t)})}),d.on("click",".invite-submit",function(){d.hide();var e={questionuserid:ynUserId,teacherids:x.getValue(),note_billno:f.invite.number};$.post("/consultation/invitationTeacher.htm",e,function(e){layer.msg("success"==e?"邀请成功":"错误:"+e)})})}function r(e){if(!ynIsLogin)return yn.login.render();if(ynTeacherId)return layer.msg("老师不能提问!");f=_.extend({select:!1,invite:!1,filter:[]},e);var t={select:function(){return x.add({id:f.select.id,name:f.select.name})},invite:function(){u.hide(),m.show()}};a(function(e){o(),d.show().velocity("transition.expandIn",{duration:300}),d.show(),d.find(".times .value").text(e),f.select&&t.select(),f.invite&&t.invite(),f.filter.push(ynTeacherId),p=function(){var e=f.filter.join("-");return"-"+e+"-"}(),b.render()})}function o(){u.show(),y.clear(),x.clear(),k.hide(),m.hide(),w.hide(),$("#ask-win-stock").val("")}function a(e){return ynIsLogin?void $.getJSON("/consultation/queryTodayQuestionCount.htm",{questionuserid:ynUserId,t:S()},function(t){var n=v-+t.rows;return n<1?void layer.msg("今天已达到提问提问次数上限"):void e(n)}):void yn.login.render()}function s(){var e=d.find("textarea"),t=d.find(".wordCount .value");yn.wordCount(e,{indicate:t})}function c(e,t){var n=e.match(/[0-9]{6}/g);if(!n)return t(!1);var i=_.find(n,function(e){return W(e)});return i?void h(i).done(function(e){return e&&e.length<6?t(!1):void t({code:i,name:e[0]})}):t(!1)}function l(){var e=$(window).width(),t=$(window).height(),n=d.outerWidth(),i=d.outerHeight();d.css({left:(e-n)/2+"px",top:(t-i)/2+"px"})}n(6);var d,u,f,p,h=n(10),g=n(11),v=10,m=function(){var e={};return{init:function(){var t=this;e.container=d.find(".onlyInvite"),e.button=e.container.find("button"),e.button.click(function(){return t.onSubmit()})},show:function(){return e.container.show()},hide:function(){return e.container.hide()},onSubmit:function(){return log("onSubmit is not override...")}}}(),x=function(){var e={container:null,select:null,input:null},t=[],n=function(e,t){return'<span class="item" data-id="'+e+'">@'+t+'<i class="fa fa-times-circle close-invite"></i></span>'},i=function(e){e=e||"";var t=$.Deferred();return $.getJSON("/consultation/queryLikeTeacher.htm",{likename:e},function(e){return t.resolve(e)}),t.promise()},r={exist:function(){return layer.msg("已存在")},full:function(){return layer.msg("最多能邀请三位投顾回答!")},self:function(){return layer.msg("不能向自己提问")}};return{init:function(){var n=this;e.container=d.find(".invite"),e.select=e.container.find(".select"),e.input=e.container.find("input"),e.container.on("click",".close-invite",function(){var e=$(this).parent(),n=e.data("id");e.remove();var i=_.indexOf(t,n);t.splice(i,1)}),e.input.keyup(_.debounce(function(){var e=$(this).val().replace("@","");/[\u4e00-\u9fa5]+/.test(e)&&i(e).done(function(e){return n.onChange(e)})},1e3)).focus(function(){return i("").done(function(e){return n.onChange(e)})}),e.input.blur(function(){$(this).val("")})},clear:function(){e.input.val(""),e.select.empty(),t=[]},add:function(i){return+i.id==+ynTeacherId?void r.self():(e.select.html(n(i.id,i.name)),void t.push(+i.id))},append:function(i){var o=[{key:"self",assert:+i.id==+ynTeacherId},{key:"exist",assert:_.indexOf(t,i.id)!=-1},{key:"full",assert:3==t.length}],a=_.find(o,function(e){return e.assert});return a?void r[a.key]():(e.select.append(n(i.id,i.name)),t.push(i.id),void(3==t.length&&this.onMax()))},getValue:function(){var t="";return e.select.find(".item").each(function(){t+=$(this).data("id")+"&"}),t.replace(/&$/,"")},assert:function(){return e.select.find(".item").length<1},onChange:function(){return log("onChange  note override...")},onMax:function(){return log("onMax : note override...")}}}(),k=function(){var e={};return{init:function(){var t=this,n=this;e.container=d.find(".list"),e.title=e.container.find(".info .value"),e.items=e.container.find(".list-wrap"),e.container.on("click",".close",function(){return t.hide()}),e.container.on("click",".item",function(){n.onSelect({id:$(this).data("id"),name:$(this).data("name")})})},render:function(t){this.show();var n=t.rows;e.title.text(n.length),n=_.filter(n,function(e){return p.indexOf("-"+e.answeruserid+"-")==-1}),e.items.html(template("online-teacher-template",n))},onSelect:function(e){return log("error : searchResult onSelect is not override...")},show:function(){return e.container.show()},hide:function(){return e.container.hide()}}}(),y=function(){var e={};return{init:function(){e.input=d.find("textarea"),e.input.keyup(function(){var e=$(this).val();c(e,function(e){return e?w.render(e):w.hide()})})},clear:function(){e.input.val("")},getValue:function(){return e.input.val()},assert:function(){return!_.trim(e.input.val())}}}(),w=function(){var e={},t="",n="";return{init:function(){e.container=d.find(".msg"),e.code=e.container.find(".msg-code")},hide:function(){e.container.hide(),t=n=""},render:function(i){t=i.code,n=i.name,e.code.text(t+n),e.container.show()},getValue:function(){return{code:t,name:n}}}}(),b=function(){var e={};return{init:function(){var t=this;e.items=d.find(".right .items"),e.items.on("click",".item",function(){t.onSelect({id:$(this).data("id"),name:$(this).data("name")})})},render:function(){$.getJSON("/consultation/queryOnlineTeacher.htm?pageSize=20&currentPage=1&userid="+ynUserId,function(t){var n=t.rows;n=_.filter(n,function(e){return p.indexOf("-"+e.answeruserid+"-")==-1}),e.items.html(template("online-teacher-template",n))})},onSelect:function(){return log("onlineTeacher select...")}}}(),S=function(){return(new Date).getTime()},T=function(){var e={};return{init:function(){e.input=d.find(".stockList"),e.target=d.find("textarea"),g.get().render({id:"ask-win-stock",top:42,onSelect:function(t,n){n.val(""),e.target.val(e.target.val()+t.stockWrap).trigger("keyup")}})}}}(),W=function(e){e=String(e);var t=/[036][0-9]{5}/;return!!t.test(e)};e.exports={init:i,render:r}},function(e,t,n){var i=n(7);"string"==typeof i&&(i=[[e.id,i,""]]);n(9)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(8)(),t.push([e.id,"@keyframes zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}.zoomIn{animation-name:zoomIn}*{box-sizing:border-box;margin:0}#askTeacherWindow{position:fixed;border:1px solid #c8c8c8;background:#fff;width:900px;font-size:13px;box-shadow:2px 2px 20px rgba(0,0,0,.3);border-radius:6px}#askTeacherWindow .onlyInvite{min-height:150px;text-align:center}#askTeacherWindow .onlyInvite button{margin:20px auto;display:inline-block;width:100px}#askTeacherWindow>.close{font-size:28px;position:absolute;right:5px;top:5px;cursor:pointer}#askTeacherWindow .left{float:left;width:65%;border-right:1px solid #c8c8c8;padding:20px}#askTeacherWindow .right{float:right;width:35%}#askTeacherWindow .left .title{position:relative;overflow:hidden;border-left:3px solid #d72621;padding-left:10px;margin:10px 0}#askTeacherWindow .left .title .name{font-weight:700;font-size:16px}#askTeacherWindow .left .title .times{position:absolute;right:0}#askTeacherWindow .left .title .times .value{color:#d72621;font-weight:700;margin:0 2px}#askTeacherWindow .left .invite{width:100%;border:1px solid #e6e6e6;overflow:hidden}#askTeacherWindow .left .invite .list{position:absolute;background:#fff;width:550px;left:20px;top:100px;padding:15px;box-shadow:2px 2px 10px rgba(0,0,0,.2);border:1px solid #c8c8c8;z-index:100}#askTeacherWindow .left .invite .list .close{float:right;cursor:pointer}#askTeacherWindow .left .invite .list .list-wrap{margin-top:10px;overflow:auto;height:200px;float:left}#askTeacherWindow .left .invite .select{font-size:13px;float:left;padding:9px 5px;color:#62a5d9}#askTeacherWindow .left .invite .select .item{margin-right:8px}#askTeacherWindow .left .invite .select .fa{margin-left:5px;cursor:pointer}#askTeacherWindow .left .invite input{float:left;padding:10px;border:none;padding-left:0}#askTeacherWindow .left .values{margin:10px 0}#askTeacherWindow .left textarea{width:100%;padding:10px}#askTeacherWindow .bottom{position:relative}#askTeacherWindow .bottom .msg{padding:0 0 10px}#askTeacherWindow .bottom .msg .msg-code{margin:0 5px;color:#d72621}#askTeacherWindow .bottom .msg .fa{margin-right:5px}#askTeacherWindow .actions{display:inline-block;float:left;position:relative;width:300px}#askTeacherWindow .action.search input{padding:5px}#askTeacherWindow .action.search .icon{color:gray;position:relative;left:-25px}#askTeacherWindow .submit{display:inline-block;float:right}#askTeacherWindow .submit .wordCount{position:relative;top:6px;right:10px}#askTeacherWindow .right{padding:25px}#askTeacherWindow .right .content{overflow:auto}#askTeacherWindow .right .title{color:#575757;font-size:15px}#askTeacherWindow .right .items{overflow:auto;max-height:278px}#askTeacherWindow .teacher-item{display:block;overflow:hidden;padding:10px 0;border-bottom:1px solid #f5f5f5;cursor:pointer;float:left;width:245px}#askTeacherWindow .teacher-item:hover{background:#f5f5f5}#askTeacherWindow .teacher-item:first-child{border-top:none}#askTeacherWindow .teacher-item .avatar{width:50px;height:50px;overflow:hidden;float:left;border-radius:2px}#askTeacherWindow .teacher-item .avatar img{height:100%}#askTeacherWindow .teacher-item .info{float:left;margin-left:10px}#askTeacherWindow .teacher-item .info .value{color:#ca2723;margin-right:10px;margin-left:5px}#askTeacherWindow .teacher-item .info .line1{font-size:16px;margin-bottom:10px}#askTeacherWindow .teacher-item .info .line2{font-size:13px;color:gray}#askTeacherWindow input,#askTeacherWindow textarea{outline:none;resize:none;border:1px solid #ebebeb}.submit button{color:#fff;font-family:Hiragino Sans GB,Hiragino Sans GB W3,Microsoft YaHei,tahoma,arial;font-size:12px;padding:5px 15px;border-image:initial;border-radius:2px;background:#d72621;border:1px solid #d72621}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=p[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(l(i.parts[o],t))}else{for(var a=[],o=0;o<i.parts.length;o++)a.push(l(i.parts[o],t));p[i.id]={id:i.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],o=r[0],a=r[1],s=r[2],c=r[3],l={css:a,media:s,sourceMap:c};n[o]?n[o].parts.push(l):t.push(n[o]={id:o,parts:[l]})}return t}function o(e,t){var n=v(),i=k[k.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),k.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=k.indexOf(e);t>=0&&k.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function c(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function l(e,t){var n,i,r;if(t.singleton){var o=x++;n=m||(m=s(t)),i=d.bind(null,n,o,!1),r=d.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(t),i=f.bind(null,n),r=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),i=u.bind(null,n),r=function(){a(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function d(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=y(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function u(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var p={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},g=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,x=0,k=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=g()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=r(e);return i(n,t),function(e){for(var o=[],a=0;a<n.length;a++){var s=n[a],c=p[s.id];c.refs--,o.push(c)}if(e){var l=r(e);i(l,t)}for(var a=0;a<o.length;a++){var c=o[a];if(0===c.refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete p[c.id]}}}};var y=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(module,exports){"use strict";module.exports=function(code,ops){var defer=$.Deferred();ops=_.extend({handle:!1,color:!1},ops);var reg=/[0-9]{6,}/;if(!reg.test(String(code)))return yn.log("yn.queryStock : stock code is error..."),defer.reject();var prefixs={0:"sz",3:"sz",6:"sh"},prefix=prefixs[String(code).substr(0,1)];return $.ajax({cache:!0,url:"http://hq.sinajs.cn/list="+prefix+code,type:"GET",dataType:"script",success:function success(data){var res=eval("hq_str_"+prefix+code+'.split(",")');if(res.length<5)return defer.reject();if(0===parseInt(res[3])&&(res[3]=res[2]),ops.handle){res=_.map(res,function(e){var t=parseFloat(e);return 0===t?"---":t?yn.setDecimal(e):e}),res[33]=yn.setDecimal((res[3]-res[2])/res[2]*100),res[34]=yn.setDecimal(res[3]-res[2]),res[35]=yn.setDecimal(1.1*res[1]),res[36]=yn.setDecimal(.9*res[1]),res[8]=function(){return yn.setDecimal(res[8]/1e6)+"万手"}(),res[9]=function(){if("---"==res[9])return"---";var e=res[9]/1e4;return e=e>1e4?yn.setDecimal(e/1e4)+"亿元":yn.setDecimal(e)+"万元"}();var now=res[1];ops.color&&(res[1]=yn.colorValue(res[1],{right:res[2]}),res[3]=yn.colorValue(res[3],{left:res[34]}),res[4]=yn.colorValue(res[4],{right:now}),res[5]=yn.colorValue(res[5],{right:now}),res[33]=yn.colorValue(res[33],{suffix:"%"}),res[34]=yn.colorValue(res[34]),res[35]=yn.colorValue(res[35],{right:now}),res[36]=yn.colorValue(res[36],{right:now}))}defer.resolve(res)}}),defer.promise()}},function(e,t,n){"use strict";n(12);var i=n(3);e.exports=function(){var e,t={},n=function(){var e=function(e){var t=/^[a-zA-Z]{2,5}$/.test(e),n=/^[036][0-9]{2,5}$/.test(e);return t||n},n=function(e,t){var n="query-stock-"+e,r=i.get(n,{timeout:604800});return r&&r.valid?void t(r.data):void $.getJSON("/queryStock.htm?stockcode="+e,function(e){if(e&&e.length>0){var r=_.take(e,10);t(r),i.set(n,r)}})},r=function(e,t){var n={0:"深市",3:"深市",6:"沪市"},i=_.map(e,function(e){var t=n[String(e.stockcode).substr(0,1)];return'<tr class="ynStockList"> \n                            <td class="place">'+t+'</td> \n                            <td class="stock_code">'+e.stockcode+'</td> \n                            <td class="stock_name">'+e.stockname+'</td> \n                            <td class="pinyin">'+e.pinyin+"</td> \n                          </tr>"}).join("");return"<table>"+i+"</table>"};return{render:function(i){i=_.extend({listLen:5,left:0,top:0,onSelect:function(){}},i);var o={trigger:null,left:null,top:null,parent:null,$list:null};t[i.id]?_.extend(o,t[i.id]):(o.trigger=$("#"+i.id),o.left=i.left+"px",o.top=o.trigger.height()+i.top+"px",o.parent=o.trigger.parent(),o.parent.append('<div class="ynStcokListSpacial absolute" style="left:'+o.left+";top:"+o.top+'"></div>'),o.$list=o.parent.find(".ynStcokListSpacial"),t[i.id]=o),$(document).click(function(){return o.$list.hide()}),o.parent.on("click","tr.ynStockList",function(){o.$list.hide();var e=$(this).find(".stock_code").text(),t=$(this).find(".stock_name").text(),n=$(this).find(".pinyin").text();return i.onSelect({stockCode:e,stockName:t,stockPinyin:n,stockWrap:"$"+e+t+"$"},o.trigger),!1}),o.trigger.on("keyup",_.debounce(function(){var t=$(this).val();return e(t)?void n(t,function(e){var t=_.take(e,+i.listLen);o.$list.show().html(r(t,i))}):void o.$list.hide()},300,{leading:!1,trailing:!0}))}}};return{get:function(){return e||(e=n()),e}}}()},function(e,t,n){var i=n(13);"string"==typeof i&&(i=[[e.id,i,""]]);n(9)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(8)(),t.push([e.id,"#ynStcokListSpacial{box-shadow:4px 4px 10px rgba(0,0,0,.2);border:2px solid #3274d8;background:#fff;display:none;position:fixed;overflow:hidden;z-index:50000}#ynStcokListSpacial .ynStockList td{padding:8px 15px;cursor:pointer}#ynStcokListSpacial .ynStockList:first-child td,#ynStcokListSpacial .ynStockList:hover td{background:#3274d8;color:#fff}.ynStcokListSpacial{box-shadow:4px 4px 10px rgba(0,0,0,.2);border:2px solid #3274d8;background:#fff;display:none;position:absolute;z-index:50000;top:0;left:0}.ynStcokListSpacial .ynStockList td{padding:8px 15px;cursor:pointer}.ynStcokListSpacial .ynStockList:first-child td,.ynStcokListSpacial .ynStockList:hover td{background:#3274d8;color:#fff}",""])}]);