!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="/public/bundle/",t(0)}([function(module,exports,__webpack_require__){"use strict";function getYesterday(){var e=new Date;e.setTime(e.getTime()-864e5);var t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return t}function beforeYesterday(){var e=new Date;e.setTime(e.getTime()-1728e5);var t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return t}function getSeconds(e){var t=new Date(e.replace(/-/g,"/")),n=t.getTime();return n}function timeFormat(e){var t,n=e,i=new Date,a=getSeconds(n),o=(Date.now()-a,getSeconds(getYesterday()+" 00:00:00")),r=getSeconds(getYesterday()+" 23:59:59"),s=getSeconds(beforeYesterday()+" 00:00:00"),c=getSeconds(beforeYesterday()+" 23:59:59");getSeconds(i.getFullYear()+"-01-01 00:00:00");return t=a>r?"今天"+n.substr(10,6):a>=o&&a<=r?"昨天"+n.substr(10,6):a>=s&&a<=c?"前天"+n.substr(10,6):istrtime.substr(0,16)}var Face=__webpack_require__(1),askWindow=__webpack_require__(2),liveAskStockList=__webpack_require__(21),error=__webpack_require__(20),Confirm=__webpack_require__(3),payShow=__webpack_require__(24),stockList=__webpack_require__(27),audio,msn,__dataCache={},__href=window.location.href,cateMatch=__href.match(/live/),__cate=cateMatch?cateMatch[0]:"",historyId=function(){var e=window.location.href.match(/periodical=([0-9]+)/);return e?e[1]:periodicalid}(),route={liveCommon:function(){liveHistory.init(room_userid),subject.init(),living.init(periodicalid),chat.init(periodicalid),talk.init(),living.render(),chat.render(),liveDetailSocket()},self:function(){this.liveCommon(),modifyWin.init(),pubLive.init(),subject.showEidt(),pubLive.render(),closeLiveRoom.init(),liveAskStockList.init()},user:function(){this.liveCommon(),gift.init(),gift.render()},historyList:function(){liveHistory.init(room_userid),liveHistory.render()},historyDetail:function(){liveHistory.init(room_userid),subject.init(),chat.init(historyId),living.init(historyId),$("#liveContent-title-1").text("第"+historyId+"期直播内容"),living.history_render(),chat.render()},offline:function(){this.liveCommon()}};$(function(){try{audio=new Audio("/public/media/live_msg.mp3"),msn=new Audio("/public/media/msn_msg.mp3")}catch(e){$(".yn-icon-sound").hide()}var e="-1"==teacher_isOffline,t=[{entry:"offline",assert:hasHistoryLive},{entry:"historyDetail",assert:historyId&&historyId!=periodicalid||e&&!isTeacherSelf},{entry:"historyList",assert:e},{entry:"self",assert:isTeacherSelf},{entry:"user",assert:!0}],n=_.find(t,function(e){return e.assert});if(route[n.entry](),"live"==__cate){var i=$($(".liveDetail-menu .item")[1]);i.addClass("select")}isTeacherSelf&&(addTop.init(),addTop.render()),topDetail.init(),topDetail.render(),askWindow.init(),sideTool.init(),turnPeriodical.init()});var subject=function(){var e,t,n,i;return{init:function(){e=$(".living-subject"),t=e.find(".history"),n=$(".edit-subject"),i=$(".living-subject-value"),t.on("click",function(){$("#liveDetail").hide(),liveHistory.render()}),n.click(function(){modifyWin.render(i.text()),modifyWin.onDone=function(e){i.text(e)}})},render:function(e){i.text(e.title)},showEidt:function(){n.css("display","inline-block")}}}(),modifyWin=function(){var e,t,n,i,a;return{init:function(){e=periodicalid;var o=this;n=$("#modify-subject-container"),t=$("#modify-subject"),i=t.find("textarea"),r=t.find(".submit"),a=t.find(".wordCountValue"),t.on("click",".close",function(){return n.hide()&&i.val("")}),yn.wordCount(i,{indicate:a,limit:20}),r.click(_.debounce(function(){return i.val()?void r():layer.msg("主题不能为空")},2e3,{leading:!0,trailing:!1}));var r=function(){var t=i.val();$.post("/center/editPeriodical.htm",{periodicalid:e,todaysubject:t},function(e){return e=JSON.parse(e),1!=e.status?layer.msg(error[e.status]):(layer.msg("修改成功"),n.hide(),o.onDone(t),void 0)})}},render:function(e){ynTeacherId==room_teacherid&&(n.show(),yn.centerBox(t),e&&i.val(e).trigger("keyup"))},onDone:function(){}}}(),addCare=function(e,t){var n=$.Deferred();return $.post("/center/attention.htm",{teacherid:e},function(e){if(e=JSON.parse(e),"1"==e.status){var i="关注"==t?"关注成功":"取消成功";layer.msg(i),n.resolve()}else layer.msg(error[e.status])}),n.promise()},living=function(){function e(){n.find(".photo img").each(function(){""==$(this).attr("src")&&$(this).attr("src","http://live.yuetougu.com/public/images/yn.jpg")});var e=!1;$("#live .items").scroll(function(){var t=$("#live .items").scrollTop();if(0==t&&!e){e=!0;var n=a[0].scrollHeight;c=u.find(".live-item-2").eq(0).data("id");$(this);p(function(t){return 1!=t.status?layer.msg(error[t.status]):(e=!1,t.data.list.length<l&&(layer.msg("已加载全部"),e=!0),u.prepend(f(h(t.data.list))),a.scrollTop(a[0].scrollHeight-n),void 0)})}}),n.on("click",".yn-icon-sound",function(){$(this).toggleClass("stop"),living.enableAudio=!living.enableAudio}),n.on("click",".delete",function(){if(+room_teacherid==ynTeacherId){var e=$(this),t=$(this).parents(".live-item-2");layer.confirm("确定要删除吗?",function(n){var i=e.data("id");$.post("/html/broadcasting/delBroadcasting.htm",{id:i},function(e){return e=JSON.parse(e),1==e.status?(layer.msg("已删除"),t.remove()&&layer.close(n)):layer.msg(error[e.status])})})}})}var t,n,i,a,o,r,s,c="",l=20,d=!1,u=null,p=function(e){$.getJSON("/html/queryLiveInfo.htm",{id:c,periodicalid:t,pageSize:l},function(t){e(t)})},f=function(e){return _.map(e,function(e){var t='<div class="live-item-2 clear" data-id="'+e.id+'">\n                        <div class="time"><span class="time-detail">'+e._time+'</span></div>\n                        <div class="photo avatar"><img src="'+e.teacherPhoto+'" alt="" /></div>\n                        <div class="msg">\n                            <span class="name">'+e.teacherName+'<i class="zhubo-icon"></i></span>\n                        </div>\n                        <div class="content">\n                            <span class="content-jiao"></span>\n                            <div class="live-detail">'+e.content+" "+e.btn+"</div>\n                            "+e.deleteItem+"\n                        </div>\n                    </div>",n='<div class="live-item-2 clear" data-id="'+e.id+'">\n                <div class="time"><span class="time-detail">'+e._time+'</span></div>\n                <div class="photo avatar"><img src="'+e.teacherPhoto+'" alt="" /></div>\n                <div class="msg">\n                    <span class="name">'+e.teacherName+'<i class="zhubo-icon"></i></span>\n                </div>\n                <div class="content">\n                    <span class="content-jiao"></span>\n                    <div class="message-card '+e.cardName+" "+e.style+'">\n                        <p>'+e.answer+'</p>\n                        <div class="card">\n                            <div class="card-title">'+e._title+'</div>\n                            <div class="card-content">'+e._quotecontent+"</div>\n                        </div>\n                    </div>\n                    "+e.deleteItem+"\n                </div>\n            </div>",i=e.quotecontent?n:t;return""+i}).join("")},h=function(e){return _.map(e,function(e){return e.content=yn.codeFormat(e.content),e.photo=e.photo||e.teacherPhoto,e.deleteItem=room_teacherid==ynTeacherId?'<div class="deleteIcon hide delete" data-id="'+e.id+'"></div>':"",e._link=e.link?"href = "+e.link:"",e._time=timeFormat(e.pubtime),e.isPay="0"===e.puiblisherid,e.answer="",e.quotecontent&&e.quotecontent.length>80?e._quotecontent=e.quotecontent.substr(0,80)+"…":e.quotecontent&&e.quotecontent.length<30?(e._quotecontent=e.quotecontent,e.style="line"):(e._quotecontent=e.quotecontent,e.style=""),e.contentFilter&&e.contentFilter.length>60?e._contentFilter=e.contentFilter.substr(0,60)+"…":e._contentFilter=e.contentFilter,e.link&&"-1"!=e.link.indexOf("referenceid")?(e.cardName="refer",e._title=e._contentFilter,e.btn='<span class="live-link refer">立即查看</span>。'):e.link&&"-1"!=e.link.indexOf("askStockDetail")?(e.cardName="ask",e._title="",e.answer=e._contentFilter):e.link&&"-1"!=e.link.indexOf("learning")?(e.cardName="tactics",e.contentFilter&&e.contentFilter.length>22?e._title=e.contentFilter.substr(0,22)+"…":e._title=e.contentFilter):e.link&&"-1"!=e.link.indexOf("article_id")?(e.cardName="opinion",e._title=e._contentFilter):(e.cardName="",e.btn=""),e})};return{enableAudio:!0,init:function(c){t=c,n=$("#live"),i=$("#liveDetail"),a=n.find(".items"),s=n.find(".today-item"),o=a.find(".today"),r=a.find(".history"),living.setting.init(),tooltip.init(),e(),a.on("click","img",function(){if(!$(this).parent().hasClass("avatar")){var e=$(this).attr("src");$(".img-wrap").fadeIn(100).find("#img-wrap-img").attr("src",e)}}),$(".img-wrap").click(function(){$(this).fadeOut(100)})},history_render:function(){u=r,r.show(),i.show(),o.hide(),p(function(e){return 1!=e.status?layer.msg(error[e.status]):void(e.data.list.length<1||(r.append(f(h(e.data.list))),a.scrollTop(a[0].scrollHeight)))})},render:function(){u=o,r.hide(),i.show(),o.show(),p(function(e){return 1!=e.status?layer.msg(error[e.status]):void(e.data.list.length<1||(s.html(f(h(e.data.list))),a.scrollTop(a[0].scrollHeight)))}),a.scrollTop(a[0].scrollHeight)},onSocket:function(e){d&&(a.find(".nothing").remove(),live.nothing=!1),e.pubtimeString=e.showTimeStr,e.teacherName=e.nickName,e.id=e.dataId,e.contentFilter=e.content,console.log("=data11=",[e]),a.append(f(h([e]))),tooltip.render(),living.enableAudio&&audio.play()},onTimer:function(){p(function(e){return 1!=e.status?layer.msg(error[e.status]):(log(e),void a.html(f(e.data.list)))})}}}(),sideTool=function(){var e;return{init:function(){e=$(".side-tool"),ynIsTeacher?e.on("click",".askStock-message",function(){liveAskStockList.render()}):(e.on("click",".care",function(){var e=this;if(!$(e).hasClass("true"))return ynIsLogin?+ynTeacherId==+room_teacherid?layer.msg("不能关注自己啊"):void addCare(room_teacherid,"关注").done(function(t){$(e).text("已关注").addClass("true")}):void yn.login.render()}),e.on("click",".user-ask",function(){return ynIsLogin?+ynTeacherId==+room_teacherid?layer.msg("扪心自问"):void askWindow.aimedRender({select:{id:room_teacherid,name:room_nickName}}):void yn.login.render()}),e.on("click",".user-gift",function(){}))}}}(),tooltip=function(){var e,t,n,i=!1,a=function(){i||(e.css("display","inline-block"),i=!0)},o=function(){e.css("display","none"),i=!1};return{init:function(){t=$("#live .items"),e=$(".tooltip-live"),n=$(".backToNow"),e.click(function(){o(),t.scrollTop(3e6)}),n.click(function(){n.fadeOut(),t.scrollTop(3e6)}),t.on("scroll",_.debounce(function(){var e=$(".live-item-2:last").position().top;e<510&&(o(),n.fadeOut())},500)),t.on("scroll",_.debounce(function(){var e=$(".live-item-2:last").position().top;e>510&&n.fadeIn()},500))},render:function(){ynIsTeacher||a()}}}();living.setting=function(){var e,t,n,i=function(){n.click(function(){$(this).parent().find(".select").removeClass("select"),$(this).addClass("select");var t=$(this).data("size");e.find(".items").attr("id","items-"+t)})};return{init:function(){e=$("#live"),t=e.find(".setting"),n=t.find(".font-size-item"),i()}}}();var pubLive=function(){var e,t,n,i,a,o=function(){i.on("click",_.debounce(function(){r()},2e3,{leading:!0,trailing:!1}))},r=function(){var e=t.getContent();return e?void publishLiveContent(a,e).done(function(){t.setContent("")}):void layer.msg("发布内容不能为空")};return{init:function(){a=periodicalid,e=$("#pubEditer"),n=$(".insertStockCode"),i=e.find(".submit"),t=UE.getEditor("ueditContainer",{toolbars:[["bold","indent","snapscreen","underline","pasteplain","horizontal","removeformat","fontsize","forecolor","simpleupload","insertimage","justifyleft","justifycenter","justifyjustify","fullscreen","link","unlink","lineheight"]],enableAutoSave:!1,saveInterval:36e6,initialFrameHeight:113,elementPathEnabled:!1,wordCount:!1,enableContextMenu:!1,pasteplain:!0,autotypeset:{removeClass:!0,clearFontSize:!0,removeEmptyline:!0,removeEmptyNode:!1,autotypeset:!0,indentValue:"2em"}}),stockList.get().render({id:"insertStockCode",top:70,onSelect:function(e,i){t.execCommand("inserthtml",e.stockWrap),n.val("")}}),o()},render:function(){e.show()}}}(),gift=function(){var e;return{init:function(){e=$("#gift"),gift.shoppingCart.init(),gift.giftList.init(),gift.giftList.render(),gift.pay.init()},render:function(){e.show()}}}();gift.giftList=function(){function e(e){e.parent().find(".select").removeClass("select"),e.addClass("select");e.find(".price").data("price");gift.shoppingCart.update(e)}function t(){i.on("click",".item",function(){e($(this))}),r.click(_.debounce(function(){n($(this))},f,{leading:!0,trailing:!1}))}function n(e){var t=e.data("direction"),n={right:function(){return["-",_.min([l,d])]},left:function(){return["+",_.min([l,p])]}}[t]();a.velocity({left:n[0]+"="+n[1]},{duration:f,complete:function(){({left:function(){p-=n[1],d+=n[1]},right:function(){p+=n[1],d-=n[1]}})[t]();r.filter(".gray").removeClass("gray"),0===p&&s.addClass("gray"),0===d&&c.addClass("gray")}})}var i,a,o,r,s,c,l,d,u,p=0,f=400,h=function(e){return _.map(e,function(e){return'<div class="inline item" data-id="'+e.gift_id+'">\n                        <div class="imgw"><img src="'+e.gift_photo+'" /></div>\n                        <div class="txt name">'+e.gift_name+'</div>\n                        <div class="txt price" data-price="'+e.gift_price+'">￥'+e.gift_price+"</div>\n                    </div>"}).join("")};return{init:function(){i=$("#allGifts"),a=i.find(".gift-item-wrap"),r=i.find(".arrow"),s=i.find(".arrow.left"),c=i.find(".arrow.right"),o=i.find(".gift-item-container"),t()},render:function(){$.getJSON("/gift/giftList.htm",function(e){u=e,e=_.filter(e,function(e){return"红包"!=e.gift_name}),a.html(h(e)),a.css({width:104*e.length+"px"}),l=o.width(),d=a.width()-o.width()})},getGiftName:function(e){return _.find(u,function(t){return+t.gift_id==+e}).gift_name},getPacketId:function(){return _.find(u,function(e){return"红包"==e.gift_name}).gift_id}}}(),gift.shoppingCart=function(){function e(){$.post("/app/appGiftPayOrder.htm",{pay_source:"0",goodsType:"5",teacherId:room_teacherid,buy_number:c,giftId:s,sum:d},function(e){if("1"==e.status){var t="/html/returnshortcutpayJsp.htm?orderNum="+e.data.orderNum;return void Confirm.payconfirm({name:"直播送礼",price:d,link:t,finish:!1,orderNum:e.data.orderNum})}layer.msg("参数错误 : "+error[e.status])},"json")}var t,n,i,a,o,r,s,c=1,l=0,d=0,u=function(){o.click(function(){n.text(++c),p()}),a.click(function(){1!==c&&(n.text(--c),p())}),r.click(_.debounce(function(){return ynIsLogin?ynIsTeacher?layer.msg("老师不能打赏给老师哦"):0===+d?layer.msg("多少也给点!"):void e():yn.login.render()},1500,{leading:!0,trailing:!1}))},p=function(){d=l*c,i.text(d)};return{init:function(){t=$(".gift-send"),n=t.find(".gift-count"),i=t.find(".sum"),a=t.find(".minus"),o=t.find(".plus"),r=t.find(".submit"),u()},update:function(e){l=e.find(".price").data("price"),s=e.data("id"),p()}}}(),gift.pay=function(){var e,t,n=function(){t.click(function(){return ynIsLogin?ynIsTeacher?layer.msg("老师不能打赏老师哦"):void Confirm.render({type:"livingRoom",teacherId:room_teacherid,name:"直播打赏",finish:!1}):yn.login.render()})};return{init:function(){e=$("#gift-pay"),t=e.find(".circle"),n()}}}();var liveHistory=function(){var e,t,n,i,a=1,o=11,r=function(e){return _.filter(_.map(e,function(e){return e._time=e.starttime.match(/^[^\s]+/)[0],0!=+e.status&&e}),function(e){return e})};return{init:function(o){n=o,e=$("#liveHistory"),t=e.find(".items"),i=yn.bootpag(e),isTeacherSelf||i.hide(),i.on("page",function(e,t){a=t,liveHistory.render()}),setTimeout(function(){t.find("img").each(function(){$(this).parent().hasClass("photo")||$(this).zoomify()})},1e3)},render:function(){e.show(),getMyLiveList({page:a,row:o,userid:n}).done(function(e){log("历史直播",e),e.data.list=r(e.data.list),t.html(template("liveHistory-template",e.data.list)),i.bootpag({page:a,total:e.pageNumber})})}}}(),chat=function(){function e(){n.on("click",".reply",function(){if(!ynIsLogin)return yn.login.render();var e=$(this).attr("id"),t=$(this).data("name");talk.setReply(e,{name:t}),$("body").animate({scrollTop:$(document).height()-$(window).height()},500)}),n.on("click",".delete",function(){if(!ynIsLogin)return yn.login.render();var e=$(this).parents(".chat-item"),n=e.data("id");layer.confirm("确定要删除吗",function(){$.post("/interaction/delInteraction.htm",{pid:t,ids:n},function(t){t=JSON.parse(t),"1"==t.status?(layer.msg("删除成功"),e.remove()):layer.msg(error[t.status])})})}),n.on("click",".loadMore",_.debounce(function(){var e=$(this),n=$(this).next(),i={id:n.data("id"),periodicalid:t,pageSize:p};$.getJSON("/html/queryInteractionlist.htm",i,function(t){return 1!=t.status?layer.msg(error[t.status]):t.data.list.length<p?(layer.msg("已加载全部"),t.data.list=h(t.data.list).reverse(),e.after(g(t.data.list)),void e.remove()):(t.data.list=h(t.data.list).reverse(),void e.after(g(t.data.list)))})},500)),n.on("click",".audio",function(){$(this).toggleClass("stop"),chat.enableAudio=!chat.enableAudio})}var t,n,i,a,o,r,s,c,l,d,u=1,p=20,f=!1,h=function(e,t){return _.map(e,function(e){return e._reply=e.replyInteraction?"@"+e.replyInteraction.nickName:"",e._isTeacher=room_nickName==e.nickName?"isTeacher":"",e._isSelf=e.nickName==ynUserName?"isSelf":"",e._content=e.content.replace(/\[.+?\]/g,function(e){var t=/face=/.test(e);if(t)return yn.parseFaceCode(e);var n=Face.getInstance().titleToName(e);if(!n)return e;var i=__path+"/public/module/qqface/png/"+n+"@2x.png";return'<img class="img-qqface" src="'+i+'" style="position:relative;top:4px" title="'+e+'" >'}),e._avatar=("push"==t?e.photo:e.photoImg)||"/public/images/yn.jpg",e})},g=function(e){return _.map(e,function(e){var t=2==e.user_type?"pay":"normal";return m[t](e)}).join("")},m={pay:function(e){return'<div class="chat-pay-item">\n                    <span class="time">'+e.ctimeString+'</span>\n                    <span class="content">'+e._content+"</span>\n            </div>"},normal:function(e){var t=isTeacherSelf?'<div class="absolute delete"><span class="fa fa-times"></span></div>':"",n=/qlogo|http|https/.test(e.photoImg)?e.photoImg:projectPath+e._avatar,i=1==e.is_inside&&yn.isInside,a=i?'<strong class="start" style="color:red;font-size:18px">*</strong>':"",o="";return o=ynIsTeacher&&1==e.is_referUser?"isReferUser":"notReferUser",'<div class="item chat-item '+e._isTeacher+" "+e._isSelf+" "+d+'" data-id="'+e.id+'">\n                    <div class="line line1">\n                        <div class="inline avatar"><img src="'+n+'"/></div>\n                        <span class="referUser '+o+'"><img src="/public/images/referuser.png" alt="" /></span>\n                        <span class="name">'+e.nickName+"</span>"+a+'\n                        <span class="user_type"><i class=\'item-icon-guwen\'><img src="'+type_ioc+'" alt="" /></i></span>\n                        '+t+'\n                    </div>\n                    <div class="line line2">\n                        <div class="pubContent">'+e._content+' <span class="target">'+e._reply+'</span></div>\n                    </div>\n                    <div class="line line3">\n                        <span class="time">'+e.ctimeString+'</span><span class="divice"></span>\n                        <select name="" class="banned" data-id="'+e.userid+'" data-userid="'+e.user_id+'">\n                            <option value="0">禁言</option>\n                            <option value="1">禁言1天</option>\n                            <option value="-1">永久禁言</option>\n                        </select>\n                        <a href="#talkWindow" class="reply" data-name="'+e.nickName+'" id="'+e.id+'"" >回复</a>\n                    </div>\n                </div>'}};if(ynIsLogin&&!isTeacherSelf)var v=(function(){$.post(__path+"/banned/isBanned.htm",function(e){e=JSON.parse(e),"1"==e.data?s="":(s=e.data.bannedDay,l=e.data.createTime,l=l.replace(/-/g,"/"),c=new Date(l).getTime(),c+=864e5),"user"==d&&("1"==s?($("#talkWindow .content").hide(),a.show(),v(),setInterval(function(){v()},6e4)):"-1"==s?($("#talkWindow .content").hide(),o.show()):s||($("#talkWindow .content").hide(),r.show()))})}(),function(){var e,t,n=(new Date).getTime(),i=c-n;return i>=0&&(e=Math.floor(i/1e3/60/60),t=Math.floor(i/1e3/60%60)),0==i?(layer.msg("禁言解除"),void setTimeout(function(){window.location.reload()},1e3)):($(".hour").html(e),void $(".minutes").html(t))});return{enableAudio:!0,init:function(s){t=s,n=$("#friendTalk"),i=n.find(".items"),a=$("#talkWindow .nochat"),r=$("#talkWindow .chat"),o=$("#talkWindow .nochat-f"),d=isTeacherSelf?"teacher":"user",n.on("change",".line3 .banned",function(){var e=$(this).val(),t=$(this).data("id"),n=$(this).data("userid"),i=+t?t:n;if("0"!==e){var a=$(this),o={1:"确定要禁言1天吗","-1":"确定要永久禁言吗"};layer.confirm(o[e],function(){$.post(__path+"/banned/banned.htm",{userid:i,bannedDay:e},function(e){return"1"==e.status&&(layer.msg("禁言成功"),a.val("0")),"40012"==e.status?layer.msg("请重新登录"):void("80000"==e.status&&(layer.msg("老师,不能再禁啦"),a.val("0")))},"json")})}}),o.on("click",function(){$(this);$.post(__path+"/banned/isAppeal.htm",function(e){return"20001"==e.status?layer.msg("请登录"):("1"==e.status&&(o.find("button").html("已提交申诉申请"),layer.msg("申诉已提交")),void("-1"==e.status&&(layer.msg("禁言解除"),window.location.reload())))},"json")}),e()},render:function(){getFriendTalk(t,{page:u,row:p}).done(function(e){return e.data=e.data.reverse(),e.hasMore&&i.prepend('<p class="loadMore">加载更多</p>'),e.data=h(e.data),e.data&&e.data.length<1?(i.html(ynconfig.none({margin:250})),void(f=!0)):(i.append(g(e.data)),void i.scrollTop(3e5))})},onSocket:function(e){e.photoImg=e.photo,e.ctimeString=e.showTimeStr,e.id=e.dataId,e.content=e.content.replace(/【回复:(.+)】(.+)/g,'$2<span class="target">@$1</span>');var t=g(h([e],"push"));f&&(i.find(".nothing").remove(),f=!1),i.append(t),i.scrollTop(3e4),chat.enableAudio&&msn.play()},onTimer:function(){this.render()}}}(),talk=function(){function e(){a.on("focus",function(){return!ynIsLogin&&yn.login.render()}),i.on("click",".close",function(){return talk.setReply(-1)}),i.on("click",".face",function(){return Face.getInstance().render("face-trigger",function(e){var t=a.val();a.val(t+e)}),!1}),r.on("click",_.debounce(function(){return t()},2e3,{leading:!0,trailing:!1}))}function t(){var e=a.val();if(e.length>200)return e=e.substr(0,200),void layer.msg("超出字数限制");if(!e)return layer.msg("请填写您的交流信息");var t={content:e,prId:periodicalid,parentid:c,user_type:ynIsTeacher?"1":"0"};$.post("/html/interactionComm.htm",t,function(e){return e=JSON.parse(e),1==e.status?(n(),layer.msg("提交成功")):8e4!=e.status?80001==e.status?layer.msg("您输入的内容违反相关规定，不能予以展示！"):layer.msg(error[e.status]):(layer.msg("该账号被用户举报，涉嫌违规操作，目前不能与直播间的好友进行互动"),void setTimeout(function(){window.location.reload()},1e3))})}function n(){talk.setReply(-1),a.val(""),s.text(200)}var i,a,o,r,s,c=-1;return{setReply:function(e,t){t=_.extend({name:""},t),c=e,e==-1?o.hide():o.show(),o.find(".text").text("@"+t.name)},init:function(){i=$("#talkWindow"),a=i.find("textarea"),r=i.find(".submit"),o=i.find(".replyInfo"),s=i.find(".wordCount .value"),yn.wordCount(a,{indicate:s}),i.show(),e()}}}(),showPayAnimation=function(e){log("送礼",e);new payShow({avatar:e.photo,title:e.userName,sub:"赠送"+e.giftName,gift:e.giftPhoto,count:e.count}).animate()},liveDetailSocket=function liveDetailSocket(){var host="";host=/yueniuwang/.test(href)?"http://ws.yuetougu.com":/yuetougu/.test(href)?"http://ws.yuetougu.com":live_path;try{var webSocket;host=host.replace("http:",""),webSocketPath="ws:"+host+"/websocket",webSocket=new ReconnectingWebSocket(webSocketPath),webSocket.debug=!0,webSocket.timeoutInterval=5400,window.onbeforeunload=function(){webSocket.close()},webSocket.onopen=function(e){var t="0_0_0_"+periodicalid;webSocket.send(t)},webSocket.onmessage=function(event){var _data=eval("("+event.data+")");console.log("push",_data);var dataType=_data.dataType;return"1"==dataType?void living.onSocket(_data):11==+dataType?(showPayAnimation(_data),_data.puiblisherid="0",void living.onSocket(_data)):void("2"==dataType&&chat.onSocket(_data))}}catch(e){log("use timer update data..."),setInterval(function(){living.onTimer(),chat.onTimer()},2e3)}},publishLiveContent=function(e,t){if(!ynIsLogin)return void layer.msg("请登录...");if(!t)return void layer.msg("请输入内容...");var n=$.Deferred();t=t.replace(/(<img)\s+(?:class="big_pic")?(.+?(jpg"|png"))/g,'$1  $2 class="big_pic"');var i={periodicalid:e,content:t};return $.post("/teacher/html/broadcasting/addBroadcasting.htm",i,function(e){return e=JSON.parse(e),"1"!=e.status?80001==e?layer.msg("您输入的内容违反相关规定，不能予以展示！"):layer.msg(error[e.status]):(layer.msg("发表成功"),void n.resolve(e))}),n.promise()},getMyLiveList=function(e){e=_.extend({page:1,row:10},e);var t={user_id:room_userid,pageSize:e.row,currentPage:e.page},n=$.Deferred();return $.getJSON("/center/queryMyLive.htm",t,function(t){1==t.status&&(t.pageNumber=_.max([1,Math.ceil(t.data.total/e.row)]),n.resolve(t))}),n.promise()},getFriendTalk=function(e,t){var n=$.Deferred(),t=_.extend({page:1,row:10},t),i={periodicalid:e,currentPage:t.page,pageSize:t.row};return $.getJSON("/html/interactionList.htm",i,function(e){1==e.status&&(e.hasMore=e.data.length==i.pageSize,n.resolve(e))}),n.promise()},closeLiveRoom=function(){var e;return{init:function(){e=$(".close-live").show(),e.on("click",function(){"0"==liveStatus&&layer.confirm("确定关闭直播室？",function(){$.post("/broadcasting/closePeriodical.htm",{periodicalid:periodicalid},function(e){return"1"!=e.status?layer.msg(error[e.status]):(layer.msg("直播室已关闭"),void(window.location.href=__path+"/backstage/myLive.htm"))},"json")})})}}}(),addTop=function(){var e,t,n,i,a=null,o=function(e){return _.map(e,function(e){return'<span class="todayHeadlines" data-id="'+e.id+'">'+e.tag_name+"</span>"}).join("")},r=function(){t.hide(),n.val(""),t.find(".todayWin-title").text(""),i.text(100)};return{init:function(){e=$("#liveDetail"),t=$("#todayWin"),n=t.find("textarea"),i=t.find(".wordCount"),e.on("click",".todayHeadlines",function(){var e=$(this).text();a=$(this).data("id"),t.find(".todayWin-title").text(e),t.show()}),t.on("click",".todayWin-cancel",function(){r()}),t.on("click",".todayWin-sure",_.debounce(function(){var e=_.trim(t.find("textarea").val());return e?e.length>100?layer.msg("最多输入100字"):void $.post("/broadcastingTop/addTop.htm",{tag_id:a,content:e},function(e){return 1!=e.status?layer.msg(error[e.status]):(layer.msg("置顶消息发布成功"),r(),topDetail.render(),void 0)},"json"):layer.msg("请输入内容")},2e3,{leading:!0,trailing:!1})),yn.wordCount(n,{indicate:i,limit:100});var o=null;e.find(".todayHeadlines-btn").get(0).onmouseenter=e.find(".todayHeadlines-wrap").get(0).onmouseenter=function(){clearTimeout(o),e.find(".todayHeadlines-wrap").show()},e.find(".todayHeadlines-btn").get(0).onmouseleave=e.find(".todayHeadlines-wrap").get(0).onmouseleave=function(){o=setTimeout(function(){e.find(".todayHeadlines-wrap").hide()},500)}},render:function(){$.getJSON("/broadcastingTop/getToptag.htm",function(t){return 1!=t.status?layer.msg(error[t.status]):void(t.data.length>0?e.find(".todayHeadlines-wrap").html(o(t.data)):e.find(".todayHeadlines-wrap").html('<span class="tag_none"><i class="fa fa-info" aria-hidden="true"></i>暂无标签</span>'))})}}}(),topDetail=function(){var e,t=function(e){return'<div class="todayTop">\n            '+e.delete+'\n            <span class="todayTop-title">'+e.tag_name+'</span>\n            <span class="todayTop-close"></span>\n            <span class="todayTop-time">'+e._create_time+'</span><span class="arrow-down"></span></div>\n        <div class="todayTop-content hide">'+e.content+'<span class="arrow-up"></span></div>'},n=function(e){return e._create_time=e.create_time.match(/^\d{4}-([0-9\-]+)/)[1],e.delete=isTeacherSelf?'<span class="todayTop-del" data-id="'+e.id+'">删除</span>':"",e};return{init:function(){e=$("#live"),e.on("mouseenter",".todayTop-wrap",function(){e.find(".arrow-down").hide(),e.find(".todayTop-content").show().stop().animate({height:"95px"},400)}),e.on("mouseleave",".todayTop-wrap",function(){e.find(".arrow-down").show(),e.find(".todayTop-content").stop().animate({height:"0"},400).hide()}),e.on("click",".todayTop-close",function(){e.find(".todayTop-wrap").hide(),e.find(".today-packUp").show()}),e.on("click",".today-packUp",function(){e.find(".today-packUp").hide(),e.find(".todayTop-wrap").show()}),e.on("click",".todayTop-del",function(){var t=$(this).data("id");layer.confirm("确定删除此置顶消息吗？",function(){$.post("/broadcastingTop/delTop.htm",{id:t},function(t){return"1"!=t.status?layer.msg(error[t.status]):(layer.msg("已删除"),void e.find(".todayTop-wrap").hide())},"json")}),e.find(".today-packUp").hide(),e.find(".todayTop-wrap").show()})},render:function(){$.getJSON("/broadcastingTop/topDetail.htm",{periodicalid:periodicalid},function(i){"1"==i.status&&"undefined"!=typeof i.data&&(e.find(".todayTop-wrap").show().html(t(n(i.data))),e.find(".today-packUp").html(i.data.tag_name).hide())})}}}(),turnPeriodical=function(){var e,t=null,n=null,i=null,a=null,o=null,r=3,s=r-1;return{init:function(){e=$(".setting");var c=window.location.href,l=c.match(/history=([0-2])/);t=l?l[1]:"0",0==t?(e.find(".next").hide(),e.find(".current").hide()):t==s&&e.find(".prev").hide(),getMyLiveList({page:1,row:r,userid:room_userid}).done(function(e){n=e.data.list,o=e.data.list.length}),e.on("click",".prev",function(){o-t==1||o<t||(++t,i=n[t],a=n[t].starttime.substr(0,11),window.location.href="/live/liveDetailLive.htm?teacherid="+room_teacherid+"&periodical="+i.periodicalid+"&time"+a+"&history="+t)}),e.on("click",".next",function(){0!=t&&(--t,i=n[t],a=n[t].starttime.substr(0,11),window.location.href="/live/liveDetailLive.htm?teacherid="+room_teacherid+"&periodical="+i.periodicalid+"&time"+a+"&history="+t)}),e.on("click",".current",function(){window.location.href=live_path+"live/"+room_teacherid+"/"})}}}()},function(e,t){"use strict";var n,i=function(){return"<span class='qqface icon-d_aini' title='爱你'></span><span class='qqface icon-d_aoteman' title='奥特曼'></span><span class='qqface icon-d_baibai' title='拜拜'></span><span class='qqface icon-d_beishang' title='悲伤'></span><span class='qqface icon-d_bishi' title='鄙视'></span><span class='qqface icon-d_bizui' title='闭嘴'></span><span class='qqface icon-d_chanzui' title='馋嘴'></span><span class='qqface icon-d_chijing' title='吃惊'></span><span class='qqface icon-d_dahaqi' title='打哈气'></span><span class='qqface icon-d_dalian' title='打脸'></span><span class='qqface icon-d_ding' title='顶'></span><span class='qqface icon-d_doge' title='doge'></span><span class='qqface icon-d_feizao' title='肥皂'></span><span class='qqface icon-d_ganmao' title='感冒'></span><span class='qqface icon-d_guzhang' title='鼓掌'></span><span class='qqface icon-d_haha' title='哈哈'></span><span class='qqface icon-d_haixiu' title='害羞'></span><span class='qqface icon-d_han' title='汗'></span><span class='qqface icon-d_hehe' title='呵呵'></span><span class='qqface icon-d_heixian' title='黑线'></span><span class='qqface icon-d_heng' title='哼'></span><span class='qqface icon-d_huaxin' title='花心'></span><span class='qqface icon-d_huida' title='答'></span><span class='qqface icon-d_jiyan' title='挤眼'></span><span class='qqface icon-d_keai' title='可爱'></span><span class='qqface icon-d_kelian' title='可怜'></span><span class='qqface icon-d_ku' title='酷'></span><span class='qqface icon-d_kun' title='困'></span><span class='qqface icon-d_landelini' title='懒得理你'></span><span class='qqface icon-d_lei' title='泪'></span><span class='qqface icon-d_miao' title='喵喵'></span><span class='qqface icon-d_nanhaier' title='男孩儿'></span><span class='qqface icon-d_nu' title='怒'> </span><span class='qqface icon-d_numa' title='怒骂'></span><span class='qqface icon-d_nvhaier' title='女孩儿'></span><span class='qqface icon-d_qian' title='钱'></span><span class='qqface icon-d_qinqin' title='亲亲'></span><span class='qqface icon-d_shayan' title='傻眼'></span><span class='qqface icon-d_shengbing' title='生病'></span><span class='qqface icon-d_shenshou' title='草泥马'></span><span class='qqface icon-d_shiwang' title='失望'></span><span class='qqface icon-d_shuai' title='衰'></span><span class='qqface icon-d_shuijiao' title='睡觉'></span><span class='qqface icon-d_sikao' title='思考'></span><span class='qqface icon-d_taikaixin' title='太开心'></span><span class='qqface icon-d_touxiao' title='偷笑'></span><span class='qqface icon-d_tu' title='吐'> </span><span class='qqface icon-d_tuzi' title='兔子'></span><span class='qqface icon-d_wabishi' title='挖鼻屎'></span><span class='qqface icon-d_weiqu' title='委屈'></span><span class='qqface icon-d_wen' title='问'></span><span class='qqface icon-d_xiaoku' title='笑cry'></span><span class='qqface icon-d_xiongmao' title='熊猫'></span><span class='qqface icon-d_xixi' title='嘻嘻'></span><span class='qqface icon-d_xu' title='嘘'> </span><span class='qqface icon-d_yinxian' title='阴险'></span><span class='qqface icon-d_yiwen' title='疑问'></span><span class='qqface icon-d_youhengheng' title='右哼哼'></span><span class='qqface icon-d_yun' title='晕'></span><span class='qqface icon-d_zhuakuang' title='抓狂'></span><span class='qqface icon-d_zhutou' title='猪头'></span><span class='qqface icon-d_zuohengheng' title='左哼哼'></span><span class='qqface icon-f_geili' title='给力'></span><span class='qqface icon-f_hufen' title='互粉'></span><span class='qqface icon-f_jiong' title='囧'></span><span class='qqface icon-f_meng' title='萌'></span><span class='qqface icon-f_shenma' title='神马'></span><span class='qqface icon-f_v5' title='威武'> </span><span class='qqface icon-f_xi' title='喜'> </span><span class='qqface icon-f_zhi' title='织'></span><span class='qqface icon-h_buyao' title='不要'></span><span class='qqface icon-h_good' title='good'></span><span class='qqface icon-h_lai' title='来'></span><span class='qqface icon-h_ok' title='ok'> </span><span class='qqface icon-h_ruo' title='弱'></span><span class='qqface icon-h_woshou' title='握手'></span><span class='qqface icon-h_ye' title='耶'> </span><span class='qqface icon-h_zan' title='赞'></span><span class='qqface icon-h_zuoyi' title='作揖'></span><span class='qqface icon-l_shangxin' title='伤心'></span><span class='qqface icon-l_xin' title='心'></span><span class='qqface icon-o_dangao' title='蛋糕'></span><span class='qqface icon-o_feiji' title='飞机'></span><span class='qqface icon-o_ganbei' title='干杯'></span><span class='qqface icon-o_huatong' title='话筒'></span><span class='qqface icon-o_lazhu' title='蜡烛'></span><span class='qqface icon-o_liwu' title='礼物'></span><span class='qqface icon-o_lvsidai' title='绿丝带'></span><span class='qqface icon-o_weibo' title='围脖'></span><span class='qqface icon-o_weiguan' title='围观'></span><span class='qqface icon-o_yinyue' title='音乐'></span><span class='qqface icon-o_zhaoxiangji' title='照相机'></span><span class='qqface icon-o_zhong' title='钟'></span><span class='qqface icon-w_fuyun' title='浮云'></span><span class='qqface icon-w_shachenbao' title='沙尘暴'></span><span class='qqface icon-w_taiyang' title='太阳'></span><span class='qqface icon-w_weifeng' title='微风'></span><span class='qqface icon-w_xianhua' title='鲜花'></span><span class='qqface icon-w_xiayu' title='下雨'></span><span class='qqface icon-w_yueliang' title='月亮'></span>";
},a={"呵呵":"d_hehe","嘻嘻":"d_xixi","哈哈":"d_haha","爱你":"d_aini","挖鼻屎":"d_wabishi","吃惊":"d_chijing","晕":"d_yun","泪":"d_lei","馋嘴":"d_chanzui","抓狂":"d_zhuakuang","哼":"d_heng","可爱":"d_keai","怒":"d_nu","汗":"d_han","害羞":"d_haixiu","睡觉":"d_shuijiao","钱":"d_qian","偷笑":"d_touxiao","笑cry":"d_xiaoku",doge:"d_doge","喵喵":"d_miao","酷":"d_ku","衰":"d_shuai","闭嘴":"d_bizui","鄙视":"d_bishi","花心":"d_huaxin","鼓掌":"d_guzhang","悲伤":"d_beishang","思考":"d_sikao","生病":"d_shengbing","亲亲":"d_qinqin","怒骂":"d_numa","太开心":"d_taikaixin","懒得理你":"d_landelini","右哼哼":"d_youhengheng","左哼哼":"d_zuohengheng","嘘":"d_xu","委屈":"d_weiqu","吐":"d_tu","可怜":"d_kelian","打哈气":"d_dahaqi","挤眼":"d_jiyan","失望":"d_shiwang","顶":"d_ding","疑问":"d_yiwen","困":"d_kun","感冒":"d_ganmao","拜拜":"d_baibai","黑线":"d_heixian","阴险":"d_yinxian","打脸":"d_dalian","傻眼":"d_shayan","互粉":"f_hufen","心":"l_xin","伤心":"l_shangxin","猪头":"d_zhutou","熊猫":"d_xiongmao","兔子":"d_tuzi","握手":"h_woshou","作揖":"h_zuoyi","赞":"h_zan","耶":"h_ye",good:"h_good","弱":"h_ruo","不要":"h_buyao",ok:"h_ok",haha:"h_haha","来":"h_lai","威武":"f_v5","鲜花":"w_xianhua","钟":"o_zhong","浮云":"w_fuyun","飞机":"o_feiji","月亮":"w_yueliang","太阳":"w_taiyang","微风":"w_weifeng","下雨":"w_xiayu","给力":"f_geili","神马":"f_shenma","围观":"o_weiguan","话筒":"o_huatong","奥特曼":"d_aoteman","草泥马":"d_shenshou","萌":"f_meng","囧":"f_jiong","织":"f_zhi","礼物":"o_liwu","喜":"f_xi","围脖":"o_weibo","音乐":"o_yinyue","绿丝带":"o_lvsidai","蛋糕":"o_dangao","蜡烛":"o_lazhu","干杯":"o_ganbei","男孩儿":"d_nanhaier","女孩儿":"d_nvhaier","肥皂":"d_feizao","照相机":"o_zhaoxiangji","沙尘暴":"w_shachenbao","问":"d_wen","答":"d_huida"},o={},r=function(){var e=i();$("body").append('<div id="qqface-container" style="display:none;">'+e+"</div>");var t=$("#qqface-container");return t.click(function(){return!1}),document.onclick=function(){return t.hide()},t.on("click",".qqface",function(){var e=$(this).attr("title");return n.onclick("["+e+"]"),t.hide(),!1}),{render:function(e,i,a){var r=0,s=0;a&&(r=a.left,s=a.top);var c=$("#"+e);if(!c.get(0))throw new error("没找到相应的ID");if(n.onclick=i||function(){throw new error("onclick参数未定义")},t.show(),!o[e]){var l=t.outerHeight(!0),d=t.outerWidth(!0);o[e]={height:l,width:d,top:c.offset().top-l-10+s,left:c.offset().left-d/2+r}}var u=o[e],p=u.left,f=u.top;t.css({left:p,top:f})},titleToName:function(e){var t=e.replace(/[\[\]]/g,"");return a[t]?a[t]:""}}},s={getInstance:function(){return n||(n=r()),n}};e.exports=s},function(e,t,n){"use strict";function i(e){$.post("/consultation/questionNote.htm",e,function(e){return e=JSON.parse(e),"80000"==e.status?layer.msg("该账号被用户举报，涉嫌违规操作，目前不能向投顾问股"):"80001"==e?layer.msg("您输入的内容违反相关规定，不能予以展示!"):"1"!=e.status?layer.msg(W[e.status]):void a()})}function a(){q.show(),setTimeout(function(){q.hide()},3e3)}function o(e){$.post("/app/appRewardPayOrder.htm",e,function(t){return 1!=t.status?layer.msg(W[t.status]):void(1==t.status&&m.payconfirm({type:"4",price:e.totalPrice,userid:ynUserId,orderid:t.data.orderid,link:v.pay(t.data.orderNum),orderNum:t.data.orderNum,finish:!0,read:!1,useNB:!1,success:function(){return a()}}))},"json")}function r(){y=$("#askTeacherWindow"),x=$("#questionField"),b=$("#askNoTimesWin"),q=$("#askSuccess"),T=$("#askAimedTeacher"),O.init(),A.init(),H.init(),J.init(),U.init(),P.init(),M.init(),D.init(),F.init(),V.init(),u(),p(),h(),y.on("click",".close-win",function(){y.parent("#askTeacher-wrap").hide(),c()}),T.on("click",".aim-close-win",function(){T.parent("#askAimed-wrap").hide(),c()}),q.on("click",function(){q.hide()}),b.on("click",".ask-close",function(){b.hide()}),O.onChange=function(e){return P.render(e)},O.onMax=function(){return P.hide()},P.onSelect=function(e){return O.append({id:e.id,name:e.name,price:e.price})},M.onSelect=function(e){O.append({id:e.id,name:e.name,price:e.price})},y.on("click",".submit button",function(){var e={seachBar:function(){return layer.msg("请选择投资顾问")},textarea:function(){return layer.msg("请输入您的问题")}},t=[{key:"seachBar",assert:O.assert()},{key:"textarea",assert:A.assert()}],n=_.find(t,function(e){return e.assert});if(n)return void e[n.key]();if(A.getValue().trim().length<3)return layer.msg("提问至少3个字");if(y.parent("#askTeacher-wrap").hide(),S<1){var a={pay_source:0,goodsType:4,totalPrice:O.getValue().price,teacherId:O.getValue().result,questioncontent:A.getValue(),stockcode:H.getValue().code,stockname:H.getValue().name};o(a)}else{var r={questionuserid:ynUserId,teacherids:O.getValue().result,questioncontent:A.getValue(),stockcode:H.getValue().code,stockname:H.getValue().name,note_source:0};i(r)}c()}),T.on("click",".aim-submit",function(){var e=T.find("#textarea").val().trim();if(e.length<3)return layer.msg("提问至少3个字");if(T.parent("#askAimed-wrap").hide(),S<1){var t=T.find(".aim-line .aim-num").text().trim(),n={pay_source:0,goodsType:4,totalPrice:t,teacherId:C,questioncontent:e,stockcode:U.getValue().code,stockname:U.getValue().name};o(n)}else{var a={questionuserid:ynUserId,teacherids:C,questioncontent:A.getValue(),stockcode:U.getValue().code,stockname:U.getValue().name,note_source:0};i(a)}c()}),y.on("click",".invite-submit",function(){y.hide();var e={questionuserid:ynUserId,teacherids:O.getValue().result,note_billno:w.invite.number};$.post("/consultation/invitationTeacher.htm",e,function(e){layer.msg("success"==e?"邀请成功":"错误:"+e)})})}function s(e){if(!ynIsLogin)return yn.login.render();if(ynTeacherId)return layer.msg("老师不能提问!");w=_.extend({select:!1,invite:!1,filter:[]},e);var t={select:function(){return O.add({id:w.select.id,name:w.select.name})},invite:function(){x.hide(),D.show()}};d(function(e){c(),j(),y.parent("#askTeacher-wrap").fadeIn(),y.parent("#askTeacher-wrap").show(),y.find(".times .value").text(e),w.select&&t.select(),w.invite&&t.invite(),w.filter.push(ynTeacherId),k=function(){var e=w.filter.join("-");return"-"+e+"-"}(),M.render()})}function c(){x.show(),A.clear(),O.clear(),P.hide(),D.hide(),H.hide(),T.find("textarea").val(""),U.hide(),$("#ask-win-stock").val(""),$("#stockCode").val(""),y.find(".wordCount .value").html(200),T.find(".aim-word .aim-count").html(200)}function l(e){var t=$.Deferred();return $.getJSON("/teacher/getQuestionsPrice.htm",e,function(e){1==e.status&&t.resolve(e)}),t.promise()}function d(e){return ynIsLogin?void $.getJSON("/consultation/queryTodayQuestionCount.htm",{questionuserid:ynUserId,t:R()},function(t){return 1!=t.status?layer.msg(W[t.status]):(S=z-+t.data,S=S<1?0:S,e(S),void 0)}):void yn.login.render()}function u(){var e=y.find("textarea"),t=y.find(".wordCount .value");yn.wordCount(e,{indicate:t})}function p(){var e=T.find("textarea");y.find(".wordCount .value");var t=T.find(".aim-word .aim-count");yn.wordCount(e,{indicate:t})}function f(e,t){var n=e.match(/[0-9]{6}/g);if(!n)return t(!1);var i=_.find(n,function(e){return B(e)});return i?void I(i).done(function(e){return e&&e.length<6?t(!1):void t({code:i,name:e[0]})}):t(!1)}function h(){var e=$(window).width(),t=$(window).height(),n=y.outerWidth(),i=y.outerHeight();y.css({left:(e-n)/2+"px",top:(t-i)/2+"px"})}function g(e){return ynIsLogin?ynTeacherId?layer.msg("老师不能提问!"):void d(function(t){j(),C=e.select.id,l({teacherId:C}).done(function(e){var n=e.data;T.parent("#askAimed-wrap").fadeIn(),T.parent("#askAimed-wrap").show(),T.find(".aim-times .aim-value").text(t),T.find(".aim-line .aim-num").html(n)})}):yn.login.render()}var m=n(3),v=n(12);n(13);var y,x,b,w,k,q,S,T,C,I=n(15),N=n(16),W=n(20),z=3,L=function(){$.fn.extend({animateCss:function(e){var t="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";this.addClass("animated "+e).one(t,function(){$(this).removeClass("animated "+e)})}})},j=function(){var e=$("#askTeacherWindow");!e.hasOwnProperty("animateCss"),L(),e.animateCss("zoomIn")},D=function(){var e={};return{init:function(){var t=this;e.container=y.find(".onlyInvite"),e.button=e.container.find("button"),e.button.click(function(){return t.onSubmit()})},show:function(){return e.container.show()},hide:function(){return e.container.hide()},onSubmit:function(){return log("onSubmit is not override...")}}}(),O=function(){var e={container:null,select:null,input:null,price:null},t=[],n=function(e,t){return'<span class="item" data-id="'+e+'">@'+t+'<i class="fa fa-times-circle close-invite"></i></span>'},i=function(e){e=e||"";var t=$.Deferred();return $.getJSON("/consultation/queryLikeTeacher.htm",{likename:e},function(e){return t.resolve(e)}),t.promise()},a={exist:function(){return layer.msg("已存在")},self:function(){return layer.msg("不能向自己提问")}};return{init:function(){var n=this;e.container=y.find(".invite"),e.select=e.container.find(".select"),e.input=e.container.find("input"),e.price=e.container.find(".price-num"),e.container.on("click",".close-invite",function(){var n=$(this).parent(),i=n.data("id");n.remove();var a=_.indexOf(t,i);t.splice(a,1),e.input.show(),e.price.html(0)}),e.input.keyup(_.debounce(function(){var e=$(this).val().replace("@","");/[\u4e00-\u9fa5]+/.test(e)&&i(e).done(function(e){return 1!=e.status?layer.msg(W[e.status]):void n.onChange(e)})},1e3)).focus(function(){return i("").done(function(e){return n.onChange(e)})}),e.input.blur(function(){$(this).val("")})},clear:function(){e.input.val(""),e.select.empty(),t=[],e.input.show(),e.price.html("0")},add:function(i){return+i.id==+ynTeacherId?void a.self():(e.select.html(n(i.id,i.name)),e.price.html(i.price),t.splice(0,1,i.id),void e.input.hide())},append:function(i){var o=[{key:"self",assert:+i.id==+ynTeacherId},{key:"exist",assert:_.indexOf(t,i.id)!=-1}],r=_.find(o,function(e){return e.assert});return r?void a[r.key]():(e.price.html(i.price),e.select.html(n(i.id,i.name)),t.splice(0,1,i.id),void e.input.hide())},getValue:function(){var t=e.price.html();console.log("=price=",t);var n="";return e.select.find(".item").each(function(){n+=$(this).data("id")+"&"}),{result:n.replace(/&$/,""),price:t}},assert:function(){return e.select.find(".item").length<1},onChange:function(){return log("onChange  note override...")},onMax:function(){return log("onMax : note override...")}}}(),P=function(){var e={};return{init:function(){var t=this,n=this;e.container=y.find(".list"),e.title=e.container.find(".info .value"),e.items=e.container.find(".list-wrap"),e.container.on("click",".close",function(){return t.hide()}),e.container.on("click",".item",function(){var e=$(this).data("id"),t=$(this).data("name");l({teacherId:e}).done(function(i){var a=i.data;n.onSelect({id:e,name:t,price:a})})})},render:function(t){this.show();var n=t.data.list;e.title.text(n.length),n=_.filter(n,function(e){return k.indexOf("-"+e.answeruserid+"-")==-1}),e.items.html(template("online-teacher-template",n))},onSelect:function(e){return log("error : searchResult onSelect is not override...")},show:function(){return e.container.show()},hide:function(){return e.container.hide()}}}(),A=function(){var e={};return{init:function(){e.input=y.find("textarea"),e.input.keyup(function(){var e=$(this).val();f(e,function(e){return e?H.render(e):H.hide()})})},clear:function(){e.input.val("")},getValue:function(){return e.input.val()},assert:function(){return!_.trim(e.input.val())}}}(),H=function(){var e={},t="",n="";return{init:function(){e.container=y.find(".msg"),e.code=e.container.find(".msg-code")},hide:function(){e.container.hide(),t=n=""},render:function(i){t=i.code,n=i.name,e.code.text(t+n),e.container.show()},getValue:function(){return{code:t,name:n}}}}(),J=function(){var e={};return{init:function(){e.input=T.find("textarea"),e.input.keyup(function(){var e=$(this).val();f(e,function(e){return e?U.render(e):U.hide()})})},clear:function(){e.input.val("")},getValue:function(){return e.input.val()},assert:function(){return!_.trim(e.input.val())}}}(),U=function(){var e={},t="",n="";return{init:function(){e.container=T.find(".aim-msg"),e.code=e.container.find(".msg-code")},hide:function(){e.container.hide(),t=n=""},render:function(i){t=i.code,n=i.name,e.code.text(t+n),e.container.show()},getValue:function(){return{code:t,name:n}}}}(),M=function(){var e={};return{init:function(){var t=this;e.items=y.find(".right .items"),e.items.on("click",".item",function(){var e=$(this).data("id"),n=$(this).data("name");l({teacherId:e}).done(function(i){var a=i.data;t.onSelect({id:e,name:n,price:a})})})},render:function(){$.getJSON("/consultation/queryOnlineTeacher.htm?pageSize=20&currentPage=1&userid="+ynUserId,function(t){if(1==t.status){var n=t.data.list;n=_.filter(n,function(e){return k.indexOf("-"+e.answeruserid+"-")==-1}),e.items.html(template("online-teacher-template",n))}})},onSelect:function(){return log("onlineTeacher select...")}}}(),R=function(){return(new Date).getTime()},F=function(){var e={};return{init:function(){e.input=y.find(".stockList"),e.target=y.find("textarea"),N.get().render({id:"ask-win-stock",top:42,onSelect:function(t,n){n.val(""),e.target.val(e.target.val()+t.stockWrap).trigger("keyup")}})}}}(),V=function(){var e={};return{init:function(){e.input=T.find(".stockList"),e.target=T.find("textarea"),N.get().render({id:"stockCode",top:218,left:25,onSelect:function(t,n){n.val(""),e.target.val(e.target.val()+t.stockWrap).trigger("keyup")}})}}}(),B=function(e){e=String(e);var t=/[036][0-9]{5}/;return!!t.test(e)};e.exports={init:r,render:s,aimedRender:g}},function(e,t,n){"use strict";var i=n(4),a=n(6),o=n(11),r={};e.exports={render:function(e){console.log("osp",e);var t=this;return r=_.extend({type:0,id:null,name:"",callback:null},e),r.teacherId?void i.getInstance().render({onSubmit:function(e){var n=0==r.type,i=n?c:s;i({teacherId:r.teacherId,number:e,id:r.id},function(n){"1"==n.status&&(r.url="/html/returnshortcutpayJsp.htm?orderNum="+n.data.orderNum,r.orderNum=n.data.orderNum,r.price=e,t.payconfirm(r))})}}):void layer.msg("pay : teacherId不能为空")},payconfirm:function(e){a.getInstance().render({type:e.type,price:e.price,link:e.url,referenceid:e.referenceid,userid:e.userid,orderNum:e.orderNum,finish:e.finish,read:e.read,orderid:e.orderid,success:e.success,useNB:e.useNB})}};var s=function(e,t){$.getJSON("/gift/giftList.htm",function(n){var i=_.filter(n,function(e){return"红包"==e.gift_name})[0],a=i.gift_id;$.post("/app/appGiftPayOrder.htm",{pay_source:"0",goodsType:"5",teacherId:e.teacherId,buy_number:e.number,giftId:a,sum:e.number},function(e){return 1==+e.status?void("function"==typeof t&&t(e)):void layer.msg(o[e.status])},"json")})},c=function(e,t){$.post("/app/appRewardPayOrder.htm",{goodsId:e.id,goodsType:0,totalPrice:e.number,pay_source:0,teacherId:e.teacherId},function(e){return 1==+e.status?void("function"==typeof t&&t(e)):void layer.msg(o[e.status])},"json")}},function(e,t,n){"use strict";n(5);e.exports=function(){var e=null,t=function(){$("body").append(a());var t=$("#playtour"),n=t.find("input"),o=0,r=t.find(".balance-value");return yn.centerBox(t),t.find(".close").click(function(e){return t.hide()}),t.find(".support-short-item").click(function(){$(this).addClass("thistype").siblings(".thistype").removeClass("thistype"),n.val($(this).data("type"))}),t.find(".submit").click(function(i){var a=_.trim(n.val());return/^[1-9][0-9]*$/.test(a)?(t.hide(),void(e.onSubmit&&e.onSubmit(+a))):layer.msg("客官，真的不能再少了!")}),{render:function(e){_.extend(this,e),i().done(function(e){r.text(e.balance),o=+e.balance}),n.val(""),$(".support-short-item.thistype").removeClass("thistype"),t.velocity("transition.expandIn",{duration:300})}}};return{getInstance:function(){return e||(e=t()),e}}}();var i=function(){var e=$.Deferred();return $.getJSON("/useraccount/pay_useraccountDetail.htm",{user_id:ynUserId},function(t){return e.resolve(t)}),e.promise()},a=function(){return'<div id="playtour" class="hide">\n\t\t        <p class="title-1">打赏<span>（本次交易免密码）</span></p>\n\t\t        <i class="close fa fa-times-circle fa-2x"></i>\n\t\t        <div class="wrap">\n\t\t            <div class="getPrice">\n\t\t                <div class="group">\n\t\t                    <span class="support-short-item" data-type="2">2牛币</br><font>（等价2元）</font></span>\n\t\t                    <span class="support-short-item" data-type="16">16牛币</br><font>（等价16元）</font></span>\n\t\t                    <span class="support-short-item" data-type="58">58牛币</br><font>（等价58元）</font></span>\n\t\t                </div>\n\t\t                <div class="pleases">\n\t\t                    <span>随意赏:</span>\n\t\t                    <input type="text" placeholder="请输入整数(单位:元)"/>\n\t\t                    <span>牛币</span>\n\t\t                </div>\n\t\t                <p class="balance clear">\n\t\t                \t<span class="fl" id="support-surplus">可用余额\n\t\t                \t<strong style=\'margin:0 5px; color:red;\' class="balance-value">0</strong>牛币</span>\n\t\t                \t<a href="/html/recharge.htm" class="gopay fr" target="_blank">余额不足？去充值</a>\n\t\t                </p>\n\t\t                <div class="info">\n\t\t                    <span>赠送无悔，概不退款</span>\n\t\t                    <span class="submit fr">立即打赏</span>\n\t\t                </div>\n\t\t            </div>\n\t\t        </div>\n\t\t    </div>'}},function(e,t){"use strict";var n=function(e,t){if(!t)return e;for(var n in e)t[n]&&(e[n]=t[n]);return e},i=n,a=function(e){return e=e.toString(),/^1[34578][0-9]{9}$/.test(e)},o=function(e){if("string"!=typeof e)return e;var t=e.match(/[\u4e00-\u9fa50-9a-zA-Z，。？：:（）]+/g);return t?t.join(""):e},r=function(e,t){return"string"!=typeof e?e:e.length<t?e:e.substr(0,t)+".."},s=function(e){return"string"!=typeof e?e:e.replace(/<.+?>|&nbsp;/g,"")},c=function(e,t){return r(o(s(e)),t)},l=function(e){e=String(e);var t={0:"sz",3:"sz",6:"sh"};return t[e.substr(0,1)]+e};e.exports={override:n,isMobile:a,filterHTML:s,limit:r,clean:c,extend:i,clear:o,stockPrefix:l}},function(e,t,n){"use strict";n(7);var i=(n(11),{0:"观点打赏",1:"组合",2:"课程",3:"内参订阅",4:"股票提问",5:"直播送礼",6:"vip直播室"});e.exports=function(){var e=null,t=function(){var e,t,n,o,r,s,c,l,d,u,p,f,h,g={name:"支付名称",price:0,link:"#",finish:!0,success:function(){layer.msg("支付成功")},fail:function(){layer.msg("支付尚未完成")}},m=0,v="balance",y="",x=null;$("body").append(a()),e=$(".pay-confirm-overlay"),t=e.find(".pay-confirm-box"),n=$(".pay-item-confirm"),o=e.find(".pay-item-tip"),r=e.find(".name .value"),s=e.find(".price .value"),c=$("#pay-confirm-link"),l=e.find(".orderNum-value"),d=e.find(".agree-tip"),u=e.find(".defray-item"),h=e.find(".type-nb"),e.on("click",".close",function(){$.post("/web/getPayStatus.htm",{orderNum:x},function(e){e=JSON.parse(e),"1"!=e.status||"6"!=e.data&&"1"!=e.data||g.success()}),e.hide(),b()}),o.on("click",".finish",function(){$.post("/web/getPayStatus.htm",{orderNum:x},function(t){t=JSON.parse(t),"1"!=t.status||"6"!=t.data&&"1"!=t.data?(e.velocity("callout.shake",{duration:300}),g.fail(t)):(e.hide().velocity("transition.bounceDownOut",{duration:300}),b(),g.success())})});var b=function(){n.show(),o.hide(),e.find(".defray-item.type-nb").removeClass("disable"),d.hide().find(".tip-wrap").html("")};b();var w={balance:function(){return+m<1?(layer.msg("余额不足,系统将自动跳转充值页面"),void setTimeout(function(){window.location.href="/html/recharge.htm"},2e3)):void $.post("/reward/rewardTheacher.htm",{orderNum:p},function(e){if("success"==e)return void layer.msg("支付成功!")})},wechat:function(){window.open("/html/recharge.htm?pay_type=0&orderNum="+p)},alipay:function(){window.open("/html/recharge.htm?pay_type=1&orderNum="+p)}};return e.on("click",".defray-item",function(){$(this).hasClass("disable")||(v=$(this).data("source"),console.log("=payType=",v),$(this).addClass("thisclass").siblings().removeClass("thisclass"))}),e.on("click",".jump",function(){if(console.log("payType",v),ynIsTeacher)return layer.msg("老师不能购买~");if(d.is(":visible")){var t=d.find("input").is(":checked");if(!t&&3==y)return layer.msg("请先阅读并同意《风险揭示书》《服务使用协议》"),!1;if(!t&&4==y)return layer.msg("请先阅读并同意《约投顾问股服务协议》")}w[v](),f?(n.hide(),o.show()):(e.hide(),b())}),{render:function(n){var a=this;_.extend(g,n),x=g.orderNum,r.text(i[g.type]),s.text(g.price),l.text(g.orderNum),console.log("=ops=",g),g.useNB?(h.show(),$.getJSON("/useraccount/pay_useraccountDetail.htm",{user_id:ynUserId},function(t){m=+t.balance,e.find(".yn-balance-value").html("可用余额"+t.balance+"牛币"),t.balance<g.price?(e.find(".defray-item.type-wx").click(),e.find(".defray-item.type-nb").addClass("disable")):e.find(".defray-item.type-nb").click()})):a.delBanlance(),a.orderType(g.type),y=g.type,p=g.orderNum,f=g.finish,g.read&&d.find("input").attr("checked",!0),e.show().velocity("transition.fadeIn",{duration:300}),t.velocity("transition.swoopIn",{duration:300})},delBanlance:function(){h.hide(),e.find(".defray-item.type-wx").click()},orderType:function(t){var n=this;3==t&&(d.show(),e.find(".tip-wrap").html('\n                        <a href="/protocol.htm?orderid='+g.orderid+"&referenceid="+g.referenceid+'" class="risk agree" target="_blank"><span class="blue">《风险揭示书》</span></a>\n                        <a href="/agreement.htm?orderid='+g.orderid+"&referenceid="+g.referenceid+'" class="service agree" target="_blank"><span class="blue">《服务使用协议》</span></a>'),n.delBanlance()),4==t&&(d.show(),e.find(".tip-wrap").html('<a href="/ask-agreement.htm" class="ask agree" target="_blank"><span class="blue">《约投顾问股服务协议》</span></a>'))}}};return{getInstance:function(){return e||(e=t()),e}}}();var a=function(){return' <div class="pay-confirm-overlay">\n        <div class="pay-confirm-box">\n            <div class="title">支付确认</div>\n            <span class="close"></span>\n            <div class="content">\n                <div class="pay-item pay-item-confirm">\n                    <div class="payment">\n                        <div class="price">支付金额<span class="inline fr colorRed">￥<strong class="value inline"></strong></span></div>\n                        <div class="name">订单描述<span class="value fr"></span></div>\n                        <div class="orderNum">订单编号<span class="orderNum-value fr"></span></div>\n                    </div>\n                    <div class="defray-content">\n                        <!-- 余额支付 -->\n                        <div data-source="balance" class="defray-item clear type-nb">\n                            <div class="rounded fr">\n                                <label for="roundedOne"></label>\n                            </div>\n                            <div class="defray_radio defray-balance clear fl">\n                                <div class="apyphoto fl"></div>\n                                <div class="yn_pay fl">\n                                    <p class="pay-title" style="position:relative;top:-6px;">余额支付<i class="balance-icon"></i><i class="balance-arrow"></i><span class="yn_balance"><span class="yn-balance-value"></span><a href="/html/recharge.htm" class="colorRed" target="_blank">去充值</a> </span></p>\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- 微信支付 -->\n                        <div data-source="wechat" class="defray-item clear type-wx">\n                            <div class="rounded fr">\n                                <!--<input type="radio" id="roundedTwo" name="radio">-->\n                                <label for="roundedTwo" class="label-wx"></label>\n                            </div>\n                            <div class="defray_radio defray-wechat clear fl">\n                                <div class="apyphoto fl"></div>\n                                <div class="yn_pay fl">\n                                    <span class="pay-title">微信支付</span>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- 支付宝 -->\n                        <div data-source="alipay" class="defray-item clear type-alipay">\n                            <div class="rounded fr thisclass ">\n                                <!--<input type="radio" id="roundedThree" name="radio">-->\n                                <label for="roundedThree" class="label-alipay"></label>\n                            </div>\n                            <div class="defray_radio defray-alipay clear fl">\n                                <div class="apyphoto fl"></div>\n                                <div class="yn_pay fl inline">\n                                    <span class="pay-title">支付宝支付</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="agree-tip clear hide">\n                        <span class="agree"><input type="checkbox"/><span class="txt">我已阅读并同意</span></span>\n                        <span class="tip-wrap"><span>\n                    </div>\n                    <div class="submits">\n                        <a id="pay-confirm-link" class="pay-btn jump" target="_blank">确认支付</a>\n                    </div>\n                </div>\n                <div class="pay-item pay-item-tip hide">\n                    <div class="payment">\n                        <p>支付完成前，请不要关闭此支付验证窗口</p>\n                        <p><strong>请在2小时内支付，超时将关闭订单</strong></p>\n                        <div class="submits">\n                            <a class="wrong pay-btn" href="http://us.yuetougu.com/help.htm" target="_blank">支付遇到问题</a>\n                            <a class="finish pay-btn">支付完成</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>'}},function(e,t,n){var i=n(8);"string"==typeof i&&(i=[[e.id,i,""]]);n(10)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".hide{display:none}.fr{float:right}.color666{color:#666}.inline{display:inline-block}.pay-confirm-overlay{width:100%;height:100%;position:fixed;left:0;top:0;background:rgba(0,0,0,.4);text-align:center;z-index:10000}.pay-confirm-box{display:inline-block;margin-top:200px;background:#fff;border-radius:2px;position:relative;width:500px;text-align:left;margin:auto;margin-top:245px;box-shadow:7px 4px 20px 0 hsla(0,0%,65%,.38)}.pay-confirm-box .title{text-align:left;padding:12px 20px;font-size:16px;border-bottom:1px solid #dbdbdb;font-weight:700}.pay-confirm-box .content{padding:20px 30px 25px}.pay-confirm-box .close{width:9px;height:9px;background:url(/public/v2/base/images/close-icon.png) no-repeat;position:absolute;top:16px;right:17px;cursor:pointer}.payment{padding-bottom:25px;border-bottom:1px dashed #cecece}.pay-item-tip .payment{text-align:center;border-bottom:none;line-height:26px;color:#666;padding-bottom:0;font-size:16px}.payment .name,.payment .price{font-size:16px;margin-bottom:15px}.payment .value{color:#d72612}.pay-confirm-box .submits{text-align:center;margin-top:15px}.pay-confirm-box .pay-btn{display:inline-block;padding:6px 35px;border-radius:5px;background:#f6554a;color:#fff;font-size:16px;cursor:pointer;margin:0 10px}.pay-confirm-box .pay-btn.jump{padding:9px 20px}.pay-confirm-box .pay-btn.finish{padding:6px 46px}.pay-item-tip .submits{text-align:center;margin-top:20px}.pay-item-tip .wrong{background:#a3a2a2}.agree .blue{color:#1176e8}.agree input{position:relative;top:2px;left:-3px}.agree .txt{color:#999}.agree-tip{margin-top:10px;font-size:12px}.orderNum-value{color:#666}.defray-content{padding:12px 0 0;border-bottom:1px dashed #cecece}.defray-item{height:43px;margin:12px auto}.yn_pay{width:340px;position:relative;top:4px;color:#333;font-size:16px}.type-alipay{background:url(/public/v2/base/images/zhifubao.png) no-repeat;padding-left:45px}.type-wx{background:url(/public/v2/base/images/weixin.png) no-repeat;padding-left:45px}.type-nb{background:url(/public/v2/base/images/yue.png) no-repeat;padding-left:45px}.defray-item .rounded{width:14px;height:14px;position:relative;top:7px;border:1px solid #b3b3b3;border-radius:50px}.defray-item.thisclass .rounded{border:1px solid #cb1f13}.rounded label{width:10px;height:10px;position:absolute;top:1px;left:1px;cursor:pointer;background:#b3b3b3;border-radius:50px}.defray-item.thisclass .rounded label{background:#cb1f13}.defray-item.disable .rounded,.defray-item.disable .rounded label{background:#ccc}.balance-icon{display:inline-block;width:20px;height:20px;background:url(/public/v2/base/images/balance-icon.png) no-repeat;position:relative;top:4px;left:10px}.yn_balance{color:#666;font-size:14px;height:20px;line-height:20px;border:1px solid #e7e5e5;border-left:none;box-shadow:5px 3px 10px #ececec;padding:2px 10px}.balance-arrow{display:inline-block;width:10px;height:24px;background:url(/public/images/arrow.png) no-repeat;margin-left:10px;position:relative;top:6px;left:5px}.pay-confirm-overlay .colorRed{color:#f6554a}.orderNum{font-size:16px}.yn-balance-value{margin-right:10px}",""])},function(e,t){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(i[o]=!0)}for(a=0;a<t.length;a++){var r=t[a];"number"==typeof r[0]&&i[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),e.push(r))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=f[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(l(i.parts[o],t))}else{for(var r=[],o=0;o<i.parts.length;o++)r.push(l(i.parts[o],t));f[i.id]={id:i.id,refs:1,parts:r}}}}function a(e){for(var t=[],n={},i=0;i<e.length;i++){var a=e[i],o=a[0],r=a[1],s=a[2],c=a[3],l={css:r,media:s,sourceMap:c};n[o]?n[o].parts.push(l):t.push(n[o]={id:o,parts:[l]})}return t}function o(e,t){var n=m(),i=x[x.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),x.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function r(e){e.parentNode.removeChild(e);var t=x.indexOf(e);t>=0&&x.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function c(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function l(e,t){var n,i,a;if(t.singleton){var o=y++;n=v||(v=s(t)),i=d.bind(null,n,o,!1),a=d.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(t),i=p.bind(null,n),a=function(){r(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),i=u.bind(null,n),a=function(){r(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}function d(e,t,n,i){var a=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,a);else{var o=document.createTextNode(a),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function u(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}var f={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},g=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),m=h(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,y=0,x=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=g()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=a(e);return i(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var s=n[r],c=f[s.id];c.refs--,o.push(c)}if(e){var l=a(e);i(l,t)}for(var r=0;r<o.length;r++){var c=o[r];if(0===c.refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete f[c.id]}}}};var b=function(){
var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){"use strict";e.exports={1:"请求成功","-1":"请求繁忙",10001:"股票代码不存在",10002:"查询条件为空",20001:"登录失效",20002:"token为空",20003:"用户名不存在",20004:"密码为空",20005:"密码不匹配",20006:"登录失败",20007:"用户不存在",20008:"操作失败",20009:"密码不一致",20010:"TOKEN 错误",20011:"参数错误",20012:"获取验证码失败",20013:"期刊ID为空",20014:"直播室ID为空",20015:"提问内容为空",20016:"直播室未开启",20017:"直播老师未关联直播室",20018:"期刊不存在",20019:"已在其他终端登陆",20020:"提问次数超出限制",20021:"该条问题已被采纳过",20022:"不是该问题提问人",30001:"手机验证码为空",30002:"验证码错误",30003:"手机验证码错误",30004:"账号已存在",30005:"注册异常",30006:"第三方第一次登录",30007:"第三方非法用户",30008:"手机号为空",30009:"手机号已被绑定",30010:"手机号错误",40001:"参数为空",40002:"服务器异常",40003:"已点赞",40004:"评论失败",40005:"起始值为空",40006:"查询失败",40007:"请求方向格式错误",40008:"用户自选股已经存在",40009:"关注",40010:"没有此股票信息",40011:"取消关注",40012:"直播老师不存在",40013:"股票代码和名称不匹配",40014:"买入股票时资本不够",50001:"消息为空",60000:"支付成功",60001:"商品ID为空",60002:"商品类型为空",60003:"订单类型为空",60004:"订单ID为空",60005:"订单不存在",60006:"支付失败",60007:"签名为空",60008:"未传支付密码",60009:"支付密码错误",60010:"账户余额不足",60011:"用户没有开通账户",60012:"支付密码格式不正确",60013:"充值来源错误",60014:"订单金额类型不存在",60015:"订单金额错误",60016:"产品购买数量错误",60017:"礼物不存在",60018:"商品类型不存在",60019:"商品不存在",60020:"商品已购买",60021:"商品已付款请等待客服人员与您联系",60022:"商品未购买",70001:"组合不存在",70002:"组合已技术评价",70003:"收益信息为空",70004:"委托记录为空",80000:"该手机号被用户举报，涉嫌违规操作，目前不能注册账号",90000:"身份证号格式验证不通过",90001:"已通过实名制验证",90002:"还没有进行实名制验证",90003:"还没有进行风险评估",90004:"当天实名验证次数到达上线",100003:"活动已过期",100005:"用户不符合活动条件"}},function(e,t){"use strict";var n={composite:live_path+"/html/liveDetail_composite.htm"};e.exports={composite:{portal:function(){return __path+"/html/returnCompositeJsp.htm"},detail:function(e,t){return t=t||"YN",__path+"/html/CompositeDetail.htm?"+t+"ZHXQ"+e},create:function(e){return e="?EDIT"+e||"",__path+"/html/compositeCreate.htm"+e}},live:{detail:function(e){return n[e]},refer:function(e){return live_path+"/live/liveDetailRefer.htm?teacherid="+e}},refer:{detail:function(e){return __path+"/referp/list.htm?referenceid="+e}},pay:function(e){return __path+"/html/returnshortcutpayJsp.htm?orderNum="+e},video:{portal:video_path+"/video/index.htm",detail:function(e){return video_path+"/video/detail.htm?videoId="+e}},center:{stock:__path+"/myCenter/myCenter.htm"},news:{portal:news_path+"/article/index.htm"},opinion:{portal:opinion_path+"/opinion",detail:function(e){return opinion_path+"/opinion/"+e+".htm"}}}},function(e,t,n){var i=n(14);"string"==typeof i&&(i=[[e.id,i,""]]);n(10)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,'@keyframes zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}.clear:after{content:"";display:block;clear:both;_zoom:1;*zoom:1}.zoomIn{animation-name:zoomIn}*{box-sizing:border-box;margin:0}#askTeacher-wrap{width:100%;height:100%;position:fixed;top:0;left:0;background:rgba(0,0,0,.4);display:none}#askTeacherWindow{position:absolute;top:30%!important;left:50%!important;margin-left:-450px!important;border:1px solid #c8c8c8;background:#fff;width:900px;font-size:13px;box-shadow:2px 2px 20px rgba(0,0,0,.3);border-radius:6px}#askTeacherWindow .onlyInvite{min-height:150px;text-align:center}#askTeacherWindow .onlyInvite button{margin:20px auto;display:inline-block;width:100px}#askTeacherWindow>.close{width:9px;height:9px;background:url(/public/v2/base/images/close-icon.png);position:absolute;right:10px;top:10px;cursor:pointer}#askTeacherWindow .left{float:left;width:65%;border-right:1px solid #c8c8c8;padding:20px}#askTeacherWindow .right{float:right;width:35%}#askTeacherWindow .left .title{position:relative;overflow:hidden;border-left:3px solid #d72621;padding-left:10px;margin:10px 0}#askTeacherWindow .left .title .name{font-weight:700;font-size:16px}#askTeacherWindow .left .title .times{position:absolute;right:0}#askTeacherWindow .left .title .times .value{color:#d72621;font-weight:700;margin:0 2px}#askTeacherWindow .left .invite{width:100%;height:38px;border:1px solid #e6e6e6;position:relative}#askTeacherWindow .price{display:inline-block;float:right;height:36px;line-height:36px;margin-right:7px}#askTeacherWindow .priceNum{color:#dd503f;font-weight:700;margin:0 5px}#askTeacherWindow .left .invite .list{position:absolute;background:#fff;width:542px;left:0;top:37px;padding:15px;box-shadow:2px 2px 10px rgba(0,0,0,.2);border:1px solid #c8c8c8;z-index:100}#askTeacherWindow .left .invite .list .close{width:9px;height:9px;background:url(/public/v2/base/images/close-icon.png);float:right;cursor:pointer}#askTeacherWindow .left .invite .list .list-wrap{margin-top:10px;overflow:auto;height:200px;float:left}#askTeacherWindow .left .invite .select{height:36px;line-height:36px;font-size:13px;float:left;padding:0 5px;color:#62a5d9}#askTeacherWindow .left .invite .select .item{margin-right:8px}#askTeacherWindow .left .invite .select .fa{margin-left:5px;cursor:pointer}#askTeacherWindow .left .invite input{float:left;padding:10px;border:none;padding-left:0}#askTeacherWindow .left .values{margin:10px 0}#askTeacherWindow .left textarea{width:100%;padding:10px}#askTeacherWindow .bottom{position:relative}#askTeacherWindow .bottom .msg{padding:0 0 10px}#askTeacherWindow .bottom .msg .msg-code{margin:0 5px;color:#d72621}#askTeacherWindow .bottom .msg .fa{margin-right:5px}#askTeacherWindow .actions{display:inline-block;float:left;position:relative;width:300px}#askTeacherWindow .action.search input{padding:5px}#askTeacherWindow .action.search .icon{color:gray;position:relative;left:-25px}#askTeacherWindow .submit{display:inline-block;float:right}#askTeacherWindow .submit .wordCount{position:relative;top:6px;right:10px}#askTeacherWindow .right{padding:25px}#askTeacherWindow .right .content{overflow:auto}#askTeacherWindow .right .title{color:#575757;font-size:15px}#askTeacherWindow .right .items{overflow:auto;max-height:278px}#askTeacherWindow .teacher-item{display:block;overflow:hidden;padding:10px 0;border-bottom:1px solid #f5f5f5;cursor:pointer;float:left;width:245px}#askTeacherWindow .teacher-item:hover{background:#f5f5f5}#askTeacherWindow .teacher-item:first-child{border-top:none}#askTeacherWindow .teacher-item .avatar{width:50px;height:50px;overflow:hidden;float:left;border-radius:2px}#askTeacherWindow .teacher-item .avatar img{height:100%}#askTeacherWindow .teacher-item .info{float:left;margin-left:10px}#askTeacherWindow .teacher-item .info .value{color:#ca2723;margin-right:10px;margin-left:5px}#askTeacherWindow .teacher-item .info .line1{font-size:16px;margin-bottom:10px}#askTeacherWindow .teacher-item .info .line2{font-size:13px;color:gray}#askTeacherWindow input,#askTeacherWindow textarea{outline:none;resize:none;border:1px solid #ebebeb}.submit button{color:#fff;font-family:Hiragino Sans GB,Hiragino Sans GB W3,Microsoft YaHei,tahoma,arial;font-size:12px;padding:5px 15px;border-image:initial;border-radius:2px;background:#d72621;border:1px solid #d72621}#askNoTimesWin{width:470px;background:#fff;box-shadow:2px 2px 20px rgba(0,0,0,.3);text-align:center;padding:20px 0;position:fixed;top:220px;left:50%;margin-left:-235px;z-index:1000}#askNoTimesWin .goLiveRoom{display:block;width:140px;height:40px;line-height:40px;text-align:center;color:#fff;background:#f03333;margin:40px auto 0;border-radius:4px;cursor:pointer;text-decoration:none}#askNoTimesWin .ask-icon{margin:20px auto}#askNoTimesWin .ask-tip{margin:10px auto;color:#666;font-size:15px}#askNoTimesWin .ask-close{float:right;position:relative;right:10px;top:-9px;cursor:pointer}#askSuccess{width:100%;height:100%;position:fixed;top:0;left:0;background:rgba(0,0,0,.4);z-index:998;display:none;cursor:pointer}#askSuccess .askSuccess-wrap{width:391px;background:#fff;border-radius:4px;box-shadow:0 0 4px hsla(0,0%,40%,.73);position:absolute;top:40%;left:50%;margin-left:-195px;text-align:center;padding:28px 0;font-size:16px;color:#666}#askSuccess .askSuccess-img{width:60px;height:60px;background:url("/public/v2/base/images/askSuccess.png") no-repeat;margin:0 auto 15px}#askSuccess .askSuccess-text{margin:12px auto 0}#askSuccess .askSuccess-text.first{margin-bottom:18px}#askSuccess .askSuccess-red{color:#dd503f}#askAimed-wrap{width:100%;height:100%;position:fixed;top:0;left:0;background:rgba(0,0,0,.4);display:none}#askAimedTeacher{width:534px;padding:20px 25px;background:#fff;position:fixed;top:30%;left:50%;margin-left:-277px;border-radius:6px;box-shadow:2px 2px 20px rgba(0,0,0,.3)}#askAimedTeacher .aim-close-win{width:9px;height:9px;background:url(/public/v2/base/images/close-icon.png);float:right;cursor:pointer;position:relative;top:-10px;right:-15px}#askAimedTeacher .aim-title{position:relative;overflow:hidden;border-left:3px solid #d72621;padding-left:10px;font-size:16px}#askAimedTeacher .aim-times{float:right;font-size:12px;color:#333;position:relative;top:2px}#askAimedTeacher #textarea{width:100%;height:150px;padding:13px;font-size:13px;line-height:19px}#askAimedTeacher .aim-content{margin:14px auto}#askAimedTeacher .aim-line{display:inline-block;float:right;font-size:14px}#askAimedTeacher .aim-price,#askAimedTeacher .aim-word{color:#999;margin:0 5px}#askAimedTeacher .aim-num,.aim-value{color:#dd503f}#askAimedTeacher .aim-red{color:#dd503f;margin-left:5px}#askAimedTeacher .aim-submit{display:inline-block;width:57px;height:31px;line-height:31px;text-align:center;color:#fff;background:#d72621;border-radius:2px;cursor:pointer}#askAimedTeacher #stockCode{display:inline-block;width:122px;height:29px;background:#fff;font-size:12px;padding-left:5px}#askAimedTeacher .aim-msg{margin-bottom:10px}#askAimedTeacher .msg-code{margin:0 5px;color:#d72621}',""])},function(module,exports){"use strict";module.exports=function(code,ops){var defer=$.Deferred();ops=_.extend({handle:!1,color:!1},ops);var reg=/[0-9]{6,}/;if(!reg.test(String(code)))return yn.log("yn.queryStock : stock code is error..."),defer.reject();var prefixs={0:"sz",3:"sz",6:"sh"},prefix=prefixs[String(code).substr(0,1)];return $.ajax({cache:!0,url:"http://hq.sinajs.cn/list="+prefix+code,type:"GET",dataType:"script",success:function success(data){var res=eval("hq_str_"+prefix+code+'.split(",")');if(res.length<5)return defer.reject();if(0===parseInt(res[3])&&(res[3]=res[2]),ops.handle){res=_.map(res,function(e){var t=parseFloat(e);return 0===t?"---":t?yn.setDecimal(e):e}),res[33]=yn.setDecimal((res[3]-res[2])/res[2]*100),res[34]=yn.setDecimal(res[3]-res[2]),res[35]=yn.setDecimal(1.1*res[1]),res[36]=yn.setDecimal(.9*res[1]),res[8]=function(){return yn.setDecimal(res[8]/1e6)+"万手"}(),res[9]=function(){if("---"==res[9])return"---";var e=res[9]/1e4;return e=e>1e4?yn.setDecimal(e/1e4)+"亿元":yn.setDecimal(e)+"万元"}();var now=res[1];ops.color&&(res[1]=yn.colorValue(res[1],{right:res[2]}),res[3]=yn.colorValue(res[3],{left:res[34]}),res[4]=yn.colorValue(res[4],{right:now}),res[5]=yn.colorValue(res[5],{right:now}),res[33]=yn.colorValue(res[33],{suffix:"%"}),res[34]=yn.colorValue(res[34]),res[35]=yn.colorValue(res[35],{right:now}),res[36]=yn.colorValue(res[36],{right:now}))}defer.resolve(res)}}),defer.promise()}},function(e,t,n){"use strict";n(17);var i=n(19);e.exports=function(){var e,t={},n=function(){var e=function(e){var t=/^[a-zA-Z]{2,5}$/.test(e),n=/^[036][0-9]{2,5}$/.test(e);return t||n},n=function(e,t){var n="query-stock-"+e,a=i.get(n,{timeout:604800});return a&&a.valid?void t(a.data):void $.getJSON("/queryStock.htm?stockcode="+e,function(e){if(e&&e.length>0){var a=_.take(e,10);t(a),i.set(n,a)}})},a=function(e,t){var n={0:"深市",3:"深市",6:"沪市"},i=_.map(e,function(e){var t=n[String(e.stockcode).substr(0,1)];return'<tr class="ynStockList"> \n                            <td class="place">'+t+'</td> \n                            <td class="stock_code">'+e.stockcode+'</td> \n                            <td class="stock_name">'+e.stockname+'</td> \n                            <td class="pinyin">'+e.pinyin+"</td> \n                          </tr>"}).join("");return"<table>"+i+"</table>"};return{render:function(i){i=_.extend({listLen:5,left:0,top:0,onSelect:function(){}},i);var o={trigger:null,left:null,top:null,parent:null,$list:null};t[i.id]?_.extend(o,t[i.id]):(o.trigger=$("#"+i.id),o.left=i.left+"px",o.top=o.trigger.height()+i.top+"px",o.parent=o.trigger.parent(),o.parent.append('<div class="ynStcokListSpacial absolute" style="left:'+o.left+";top:"+o.top+'"></div>'),o.$list=o.parent.find(".ynStcokListSpacial"),t[i.id]=o),$(document).click(function(){return o.$list.hide()}),o.parent.on("click","tr.ynStockList",function(){o.$list.hide();var e=$(this).find(".stock_code").text(),t=$(this).find(".stock_name").text(),n=$(this).find(".pinyin").text();return i.onSelect({stockCode:e,stockName:t,stockPinyin:n,stockWrap:"$"+e+t+"$"},o.trigger),!1}),o.trigger.on("keyup",_.debounce(function(){var t=$(this).val();return e(t)?void n(t,function(e){var t=_.take(e,+i.listLen);o.$list.show().html(a(t,i))}):void o.$list.hide()},300,{leading:!1,trailing:!0}))}}};return{get:function(){return e||(e=n()),e}}}()},function(e,t,n){var i=n(18);"string"==typeof i&&(i=[[e.id,i,""]]);n(10)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,"#ynStcokListSpacial{box-shadow:4px 4px 10px rgba(0,0,0,.2);border:2px solid #3274d8;background:#fff;display:none;position:fixed;overflow:hidden;z-index:50000}#ynStcokListSpacial .ynStockList td{padding:8px 15px;cursor:pointer}#ynStcokListSpacial .ynStockList:first-child td,#ynStcokListSpacial .ynStockList:hover td{background:#3274d8;color:#fff}.ynStcokListSpacial{box-shadow:4px 4px 10px rgba(0,0,0,.2);border:2px solid #3274d8;background:#fff;display:none;position:absolute;z-index:50000;top:0;left:0}.ynStcokListSpacial .ynStockList td{padding:8px 15px;cursor:pointer;line-height:20px}.ynStcokListSpacial .ynStockList:first-child td,.ynStcokListSpacial .ynStockList:hover td{background:#3274d8;color:#fff}",""])},function(e,t){"use strict";var n=window.JSON||!1,i=localStorage,a=function(e,t){n&&e&&(t=[_.now(),n.stringify(t)].join("@@@@"),i.setItem(e,t))},o=function(e,t){var a,o;if(n&&e){t=_.extend({disable:!1,timeout:3e3},t);var r=i.getItem(e);if(r&&/@@@@/.test(r)){var s=r.split("@@@@");try{var a=n.parse(s[1]),c=s[0],o=!t.disable&&_.now()-c<=1e3*t.timeout}catch(e){a=[],o=!1}return{data:a,valid:o}}}};e.exports={set:a,get:o,joinKey:function(e){var t=[];for(var n in e)t.push(String(e[n]));return t.join("")}}},function(e,t){"use strict";e.exports={1:"请求成功","-1":"请求繁忙",10001:"股票代码不存在",10002:"查询条件为空",20001:"用户未登录",20002:"token为空",20003:"用户名不存在",20004:"密码为空",20005:"密码不匹配",20006:"登录失败",20007:"用户不存在",20008:"操作失败",20009:"密码不一致",20010:"TOKEN 错误",20011:"参数错误",20012:"获取验证码失败",20013:"期刊ID为空",20014:"直播室ID为空",20015:"提问内容为空",20016:"直播室未开启",20017:"直播老师未关联直播室",20018:"期刊不存在",20019:"已在其他终端登陆",20020:"提问次数超出限制",20021:"该条问题已被采纳过",20022:"不是该问题提问人",30001:"手机验证码为空",30002:"图片验证码错误",30003:"手机验证码错误",30004:"账号已存在",30005:"注册异常",30006:"第三方第一次登录",30007:"第三方非法用户",30008:"手机号为空",30009:"手机号已被绑定",30010:"手机号错误",30011:"该号码不是约投顾的工作电话，慎防假冒！",40001:"参数为空",40002:"服务器异常",40003:"已点赞",40004:"评论失败",40005:"起始值为空",40006:"查询失败",40007:"请求方向格式错误",40008:"用户自选股已经存在",40009:"关注",40010:"没有此股票信息",40011:"取消关注",40012:"直播老师不存在",40013:"股票代码和名称不匹配",40014:"买入股票时资本不够",50001:"消息为空",50002:"老师不能提问",50003:"老师不能关注",60000:"支付成功",60001:"商品ID为空",60002:"商品类型为空",60003:"订单类型为空",60004:"订单ID为空",60005:"订单不存在",60006:"支付失败",60007:"签名为空",60008:"未传支付密码",60009:"支付密码错误",60010:"账户余额不足",60011:"用户没有开通账户",60012:"支付密码格式不正确",60013:"充值来源错误",60014:"订单金额类型不存在",60015:"订单金额错误",60016:"产品购买数量错误",60017:"礼物不存在",60018:"商品类型不存在",60019:"商品不存在",60020:"商品已购买",60021:"商品已付款请等待客服人员与您联系",60022:"商品未购买",60023:"商品购买时间已过",70001:"组合不存在",70002:"组合已技术评价",70003:"收益信息为空",70004:"委托记录为空",80000:"该手机号被用户举报，涉嫌违规操作，目前不能注册账号",80001:"您输入的内容违反相关规定，不能予以展示!",90000:"身份证号格式验证不通过",90001:"已通过实名制验证",90002:"还没有进行实名制验证",90003:"还没有进行风险评估",90004:"当天实名验证次数到达上线",100001:"活动注册成功",100002:"活动注册失败",100003:"活动已过期",100005:"用户不符合活动条件"}},function(e,t,n){"use strict";function i(e){e=_.extend({pageSize:10,currentPage:1,noteType:0},e);var t=$.Deferred();return $.getJSON("/consultation/teacherNoteType.htm",e,function(n){return 1!=n.status?layer.msg(error[n.status]):(n.pageNubmer=_.max([1,Math.ceil(+n.data.total/e.pageSize)]),void t.resolve(n))}),t.promise()}var a=n(31);n(22);var o=function(e){return _.map(e,function(e){return e.questiontime=e.questiontime?yn.timeFormat(e.questiontime):"",e.answercontent=e.answercontent?yn.filterHTML(e.answercontent):"",e.zancount=e.zancount||"0",e.price=e.questionPrice?e.questionPrice:0,e.overdue=3==e.is_reply?"hide":"",e.ignore=2==e.is_reply?"hide":"",e.answercontent&&e.answercontent.length>50?e._answercontent=e.answercontent.substr(0,50)+"..":e._answercontent=e.answercontent,e.questioncontent&&e.questioncontent.length>50?e._questioncontent=e.questioncontent.substr(0,50)+"..":e._questioncontent=e.questioncontent,e})};e.exports=function(){var e,t,n,r,s=0,c=1,l={0:"待回答",1:"已回答",2:"已忽略",3:"已过期"},d={0:"list-item-template",1:"list-chat-template",2:"list-item-template",3:"list-item-template"};return{init:function(){var i=this;e=$("#teacher-ask-win"),n=e.find(".ask-items"),t=e.find(".totalCount"),r=yn.bootpag($(".teacher-ask-container")),r.on("page",function(e,t){c=t,i.render({currentPage:t,noteType:s})}),e.click(function(){e.hide(),s=0,e.find(".menu-item").removeClass("select"),e.find(".menu-item.wait").addClass("select")}),e.on("click",".teacher-ask-wrap",function(){return!1}),e.on("click",".menu-item",function(){$(this).hasClass("select")||($(this).addClass("select").siblings().removeClass("select"),s=$(this).data("type"),i.render({currentPage:1,noteType:s}))}),e.on("click",".ignoreButton",function(){var e=this;layer.confirm("确定忽略该提问吗",function(){var t=$(e).data("noteid");$.post("/consultation/updateNoteIsReply.htm",{noteid:t},function(e){e=JSON.parse(e),1==e.status&&(layer.msg("已忽略"),setTimeout(function(){i.render({currentPage:c,noteType:s})},1e3))})})}),e.on("click",".askButton",function(){var e=$(this).parents(".list-item").find(".questioncontent").text(),t=$(this).data("noteid"),n=$(this).data("code"),o=$(this).data("name"),r=$(this).data("number");a.render(t,{stockName:o,stockCode:n,number:r,question:e,success:function(){i.render({currentPage:c,noteType:s})}})})},render:function(a){e.show(),a=_.extend({pageSize:10,currentPage:1,noteType:0},a),i(a).done(function(e){n.html(template(d[s],o(e.data.list))),r.bootpag({page:a.currentPage,total:e.pageNubmer}),t.html("共有"+e.data.total+"条提问"+l[s])})}}}(),$(function(){a.init({isPop:!1})})},function(e,t,n){var i=n(23);"string"==typeof i&&(i=[[e.id,i,""]]);n(10)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,'#teacher-ask-win{width:100%;height:100%;position:fixed;top:0;left:0;background:rgba(0,0,0,.4);z-index:999}.teacher-ask-wrap{width:800px;height:715px;background:#fff;position:absolute;top:50%;left:50%;margin-left:-400px;margin-top:-358px;word-break:normal}.category table{width:100%}.category td{text-align:center;padding:18px 0;background:#e4e4e4;cursor:pointer;border-left:1px solid #c8c8c8;color:#333;font-size:18px}.category td:first-child{border-left:none}.category td.select{background:#c81e26;color:#fff;border-color:#d72621}.totalCount{color:#f6554a;font-size:16px;padding:20px 28px}.teacher-ask-wrap .ask-items{padding:0 28px;height:520px;overflow:auto}.list-question{border-bottom:1px dotted #ececec;padding-bottom:15px;margin-bottom:15px}.list-item{display:block;padding:15px 0;background:#f7f7f7;padding:15px 10px;margin-bottom:15px}.list-item .line1 .ask-icon{background:url(/public/images/live/q_icon.png) no-repeat}.list-item .line1 .answer-icon,.list-item .line1 .ask-icon{display:inline-block;width:20px;height:20px;position:relative;top:3px}.list-item .line1 .answer-icon{background:url(/public/images/live/a_icon.png) no-repeat}.list-item .line1 .value{width:694px;display:inline-block;font-size:14px;color:#666;line-height:24px;margin-left:25px;margin-top:-20px}.list-item .line2{font-size:12px;margin-top:10px;padding-left:18px;position:relative;line-height:25px;height:25px}.list-item .line2>*{margin:0 5px;color:#999}.askPrice{color:#dd503f;margin:0 5px}.list-item .line2 .time{color:gray}.list-item .line2 .answerCount{position:absolute;right:80px}.list-item .line2 .answerCount .value{color:#d72621}.list-item .line2 .askButton{width:62px;height:24px;text-align:center;line-height:23px;position:absolute;right:0;top:0;margin-left:20px;border:1px solid #f6554a;border-radius:3px;color:#d72621;font-size:12px;cursor:pointer}.list-item .line2 .askButton:hover{background:#f6554a;color:#fff;transition:all .3s}.list-item .line2 .ignoreButton{width:62px;height:24px;text-align:center;line-height:23px;position:absolute;right:73px;top:0;margin-left:20px;border:1px solid #5ea5f5;border-radius:3px;color:#5ea5f5;font-size:12px;cursor:pointer}.list-item .line2 .ignoreButton:hover{background:#5ea5f5;color:#fff;transition:all .3s}.list-question .line2{text-align:right}.teacher-ask-container{position:relative;height:100%}#answerWindow{background:#f2f2f2;border-radius:4px;position:absolute;width:100%;left:0;bottom:0;z-index:1000;box-shadow:2px 0 8px rgba(6,13,36,.36)}#answerWindow .answerWindow-wrap{border-radius:5px;overflow:hidden}#answerWindow .question{background:none;padding:10px 20px;font-size:14px;line-height:24px;color:#666}#answerWindow .title{position:relative;padding:10px;border-bottom:none;overflow:hidden;padding-left:20px}#answerWindow .title .close-window{position:absolute;right:10px;top:10px;width:12px;height:12px;background:url(/public/images/live/cha.png);cursor:pointer}#answerWindow .title .icon-title{float:left;font-size:16px;position:relative;top:4px;margin-right:5px}#answerWindow .category .name,#answerWindow .title .name{font-size:16px;color:#333}#answerWindow .category .name:before,#answerWindow .title .name:before{display:inline-block;content:"";width:3px;height:15px;background:#dd503f;margin-right:5px;position:relative;top:2px}#answerWindow .content{padding:15px 20px 10px}#answerWindow .category{margin-bottom:15px}#answerWindow .category .item{border:1px solid #f6554a;width:60px;height:22px;text-align:center;line-height:18px;margin-right:16px;border-radius:15px;cursor:pointer;font-size:14px;color:#f6554a;transition:.3s}#answerWindow .category .item.select,#answerWindow .category .item:hover{border-color:#f6554a;background:#f6554a;color:#fff}#answerWindow .judge{margin-bottom:15px}#answerWindow .judge button{padding:3px 10px;border-color:gray;background:#fff;color:#202020;margin:0 5px}#answerWindow .edui-editor{border:1px solid #ececec}#answerWindow .judge button.up.select{background:#d72621;border-color:#d72621;color:#fff}#answerWindow .judge button.down.select{background:green;border-color:green;color:#fff}#answerWindow button.submit{display:block;margin:auto;width:80px;height:31px;line-height:22px;color:#fff;background:#f6554a;border:none;border-radius:4px;text-align:center;float:right;font-size:14px}#answerWindow .bottom{margin-top:10px}#answerWindow .search{display:inline-block}#answerWindow .search input{padding:0 5px;width:112px;height:31px;background:#fff}#answerWindow .search .fa-search{position:relative;right:30px;color:gray}',""])},function(e,t,n){"use strict";n(25);var i=1,a=function(e){return'<div class="pay-show-item" id="'+e.id+'">\n\t\t\t\t<div class="avatar"><img src="'+e.avatar+'" /></div>\n\t\t\t\t<div class="info">\n\t\t\t\t\t<div class="title">'+e.title+'</div>\n\t\t\t\t\t<div class="sub">'+e.sub+'</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="gift"><img src="'+e.gift+'" /></div>\n\t\t\t\t<div class="count">\n\t\t\t\t\t<span class="icon">X</span>\n\t\t\t\t\t<span class="value">'+e.count+"</span>\n\t\t\t\t</div>\n\t\t\t</div>"},o=function(e){var t="pay-animation-"+i++;e=_.extend({id:t,avatar:"http://101.201.41.116:8080/public/upload/user/20160725/20160725152444777.jpg",title:"股友赠送礼物",sub:"鲜花",gift:"http://101.201.41.116:8080/public/upload/gift/20170224/20170224152813910.png",count:"1"},e),$("body").append(a(e)),this.el=$("#"+t)};o.prototype={animate:function(e){e=_.extend({type:"move",duration:15e3},e);var t=this;10*_.range(1,6);this.el.velocity({left:"120%"},{duration:e.duration,complete:function(){t=null}})}},e.exports=o},function(e,t,n){var i=n(26);"string"==typeof i&&(i=[[e.id,i,""]]);n(10)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".pay-show-item{background:rgba(41,41,63,.85);display:inline-block;width:260px;height:60px;margin-top:20px;border-radius:30px;position:fixed;left:-320px;top:40%}.pay-show-item .avatar{width:60px;height:60px;overflow:hidden;border-radius:50%}.pay-show-item .avatar img{width:100%}.pay-show-item .info{position:absolute;top:5px;left:70px;font-size:17px;width:140px;overflow:hidden}.pay-show-item .title{color:#fff;height:20px;overflow:hidden;width:100%}.pay-show-item .sub{color:#ff8d00;margin-top:4px;font-size:16px}.pay-show-item .gift{position:absolute;top:-10px;right:-15px}.pay-show-item .count{font-size:35px;color:#ff3b01;position:absolute;right:-70px;top:10px}",""])},function(e,t,n){"use strict";n(28);var i=n(30);e.exports=function(){var e,t={},n=function(){var e=function(e){var t=/^[a-zA-Z]{2,5}$/.test(e),n=/^[036][0-9]{2,5}$/.test(e);return t||n},n=function(e,t){var n="query-stock-"+e,a=i.get(n,{timeout:604800});return a&&a.valid?void t(a.data):void $.getJSON("/queryStock.htm?stockcode="+e,function(e){if(e&&e.length>0){var a=_.take(e,10);t(a),i.set(n,a)}})},a=function(e,t){var n={0:"深市",3:"深市",6:"沪市"},i=_.map(e,function(e){var t=n[String(e.stockcode).substr(0,1)];return'<tr class="ynStockList"> \n                            <td class="place">'+t+'</td> \n                            <td class="stock_code">'+e.stockcode+'</td> \n                            <td class="stock_name">'+e.stockname+'</td> \n                            <td class="pinyin">'+e.pinyin+"</td> \n                          </tr>"}).join("");return"<table>"+i+"</table>"};return{render:function(i){i=_.extend({listLen:5,left:0,top:0,onSelect:function(){}},i);var o={trigger:null,left:null,top:null,parent:null,$list:null};t[i.id]?_.extend(o,t[i.id]):(o.trigger=$("#"+i.id),o.left=i.left+"px",o.top=o.trigger.height()+i.top+"px",o.parent=o.trigger.parent(),o.parent.append('<div class="ynStcokListSpacial absolute" style="left:'+o.left+";top:"+o.top+'"></div>'),o.$list=o.parent.find(".ynStcokListSpacial"),t[i.id]=o),$(document).click(function(){return o.$list.hide()}),o.parent.on("click","tr.ynStockList",function(){o.$list.hide();var e=$(this).find(".stock_code").text(),t=$(this).find(".stock_name").text(),n=$(this).find(".pinyin").text();return i.onSelect({stockCode:e,stockName:t,stockPinyin:n,stockWrap:"$"+e+t+"$"},o.trigger),!1}),o.trigger.on("keyup",_.debounce(function(){var t=$(this).val();return e(t)?void n(t,function(e){var t=_.take(e,+i.listLen);o.$list.show().html(a(t,i))}):void o.$list.hide()},300,{leading:!1,trailing:!0}))}}};return{get:function(){return e||(e=n()),e}}}()},function(e,t,n){var i=n(29);"string"==typeof i&&(i=[[e.id,i,""]]);n(10)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,"#ynStcokListSpacial{box-shadow:4px 4px 10px rgba(0,0,0,.2);border:2px solid #3274d8;background:#fff;display:none;position:fixed;overflow:hidden;z-index:50000}#ynStcokListSpacial .ynStockList td{padding:8px 15px;cursor:pointer}#ynStcokListSpacial .ynStockList:first-child td,#ynStcokListSpacial .ynStockList:hover td{background:#3274d8;color:#fff}.ynStcokListSpacial{box-shadow:4px 4px 10px rgba(0,0,0,.2);border:2px solid #3274d8;background:#fff;display:none;position:absolute;z-index:50000;top:0;left:0}.ynStcokListSpacial .ynStockList td{padding:8px 15px;cursor:pointer}.ynStcokListSpacial .ynStockList:first-child td,.ynStcokListSpacial .ynStockList:hover td{background:#3274d8;color:#fff}",""])},function(e,t){"use strict";var n=window.JSON||!1,i=localStorage,a=function(e,t){n&&e&&(t=[_.now(),n.stringify(t)].join("@@@@"),i.setItem(e,t))},o=function(e,t){if(n&&e){t=_.extend({disable:!1,timeout:3e3},t);var a=i.getItem(e);if(a&&/@@@@/.test(a)){var o=a.split("@@@@"),r=n.parse(o[1]),s=o[0],c=!t.disable&&_.now()-s<=1e3*t.timeout;return{data:r,valid:c}}}};e.exports={set:a,get:o,joinKey:function(e){var t=[];for(var n in e)t.push(String(e[n]));return t.join("")}}},function(e,t,n){"use strict";n(20);e.exports=function(){return{container:null,wrap:null,stock:null,question:null,judge:null,judgeStock:null,category:null,noteid:null,ue:null,stockName:null,stockCode:null,replys:[],close:null,isPop:!1,trend:null,answerCount:0,handler:{submit:function(){window.location.reload()}},init:function(e){var t=this;this.set(),e=_.extend({isPop:!1},e),e.isPop&&(this.isPop=!0,this.showPop()),this.event();var n=yn.noteTypeTag();this.category.find(".items").html(n),this.ue=UE.getEditor("answerWindow-edit",{toolbars:[["forecolor"]],initialFrameHeight:200,elementPathEnabled:!1,wordCount:!1,enableContextMenu:!1,enableAutoSave:!1,pasteplain:!0}),yn.showStockList(this.stock,{onSelect:function(e){t.stock.val(""),t.ue.focus(!0),t.ue.execCommand("insertHtml",'<span syle="color:red;font-weight:bold" class="stockWrap">'+e.stockWrap+"</span>")}})},set:function(){this.container=$("#answerWindow"),this.stock=this.container.find(".search input"),this.judge=this.container.find(".judge"),this.judgeStock=this.judge.find(".value"),this.category=this.container.find(".category"),this.close=this.container.find(".close-window"),this.wrap=this.container.find(".answerWindow-wrap"),this.question=this.wrap.find("> .question")},render:function(e,t){return e?(t=_.extend({stockName:null,stockCode:null,question:null,replys:[],number:null,answerCount:0},t),this.success=t.success||function(e){return e},void(_.indexOf(t.replys,ynTeacherId)==-1&&(+t.answerCount>0?this.category.hide():this.category.show(),this.isPop&&yn.bodyScroll(!1),t.question&&this.question.html(t.question).show(),this.noteid=e,this.stockCode=t.stockCode,this.stockName=t.stockName,this.number=t.number,this.replys=t.replys,this.trend=null,this.answerCount=t.answerCount,this.stockCode&&(this.judgeStock.text(this.stockCode+this.stockName),this.judge.show()),this.container.slideDown()))):void layer.msg("noteid is null...")},pickUpCode:function(e,t){var n=this,i=e.match(/[0-9]{6}/g);if(i){var a=_.find(i,function(e){return yn.isStockCode(e)});a&&yn.queryStock(a).done(function(e){e&&e.length>6&&(n.stockcode=a,n.stockname=e[0],t(a+e[0]))})}},showPop:function(){var e=$(window).width(),t=$(window).height(),n=800,i=(e-n)/2,a=(t-this.container.height())/2-150;this.close.show(),this.wrap.css({width:n,left:i,position:"fixed",background:"white",top:a}),this.container.css({width:e+"px",height:t+"px",left:0,top:0,position:"fixed",backgroundColor:"rgba(0,0,0,0.5)"})},disappear:function(){this.container.hide(),this.ue.setContent("")},event:function(){var e=this;this.container.on("click",".submit",_.debounce(function(){e.submit()},3e3,{leading:!0,trailing:!1})),this.container.on("click",".category .item",function(){$(this).parent().find(".select").removeClass("select"),$(this).toggleClass("select")}),this.container.on("click",".judge-item",function(){$(this).toggleClass("select");var t=$(this).data("id"),n=+!+$(this).data("id");$(".judge-item"+n).removeClass("select"),e.trend=t}),this.container.on("click",".close-window",function(){e.container.hide(),e.reset(),yn.bodyScroll(!0)})},reset:function(){this.judge.find(".select").removeClass("select"),this.category.find(".select").removeClass("select"),this.ue.setContent(""),this.stock.val("")},submit:function(){var e=this,t=this;if(""==this.ue.getContent().trim())return void layer.msg("回答内容不能为空");var n=t.category.find(".item.select").length>0;if(!n&&0==t.answerCount)return void layer.msg("请选择问题分类");this.container.hide();var i={userid:ynUserId,answeruserid:ynTeacherId,answercontent:t.ue.getContent(),answerusername:ynTeacherName,stock_trend:t.trend,note_type:t.category.find(".item.select").data("id"),noteid:t.noteid,is_reply:1,note_billno:t.number};return this.replys.length>0&&(i.is_reply=1),_.indexOf(this.replys,ynTeacherId)!=-1?void layer.msg("您已经回答过, 不能再回答..."):void $.post("/consultation/answerNote.htm",i,function(t){t=JSON.parse(t),
"1"==t.status&&(layer.msg("回复成功"),e.success())})}}}()}]);