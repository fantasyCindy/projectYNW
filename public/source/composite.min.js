"use strict";$(function(){var e=function(){var t=$(".filter"),n=t.find("> .state"),i=t.find(".items"),a={user_id:ynUserId,cStatus:"",lprice:"",hprice:"",ltarget_revenue:"",htarget_revenue:"",combination_maxterm:"",combination_style:"",pageSize:10,currentPage:1},o=function(){i.find(".select").removeClass("select"),i.find(".all").addClass("select"),a={user_id:ynUserId,cStatus:"",lprice:"",hprice:"",ltarget_revenue:"",htarget_revenue:"",combination_maxterm:"",combination_style:"",pageSize:10,currentPage:1}};return n.on("click",".item",function(){yn["switch"]($(this)),o();var t=$(this).data("value");"-1"==t?a.cStatus="":a.cStatus=+t,e.onChange(a)}),i.on("click",".goal .value",function(){yn["switch"]($(this));var t=$(this).data("value");if("-1"==t)a.ltarget_revenue=a.htarget_revenue="";else{var n=t.split("--");a.ltarget_revenue=+n[0],a.htarget_revenue=+n[1]}e.onChange(a)}),i.on("click",".price .value",function(){yn["switch"]($(this));var t=$(this).data("value");if("-1"==t)a.lprice=a.hprice="";else{var n=t.split("--");a.lprice=+n[0],a.hprice=+n[1]}e.onChange(a)}),i.on("click",".time .value",function(){yn["switch"]($(this));var t=$(this).data("value");"-1"==t?a.combination_maxterm="":a.combination_maxterm=+t,e.onChange(a)}),i.on("click",".style .value",function(){yn["switch"]($(this));var t=$(this).data("value");"-1"==t?a.combination_style="":a.combination_style=+t,e.onChange(a)}),{initValue:a,onChange:function(e){console.log(e)},getSend:function(){return a}}}(),t=(function(){var e=$(".sort"),t=e.find(".item");t.click(function(){yn["switch"]($(this))})}(),function(){var n=$(".composite-items"),i=n.find(".items"),a=$("body"),o=new ynmodule.loading;o.margin=200,o.type=3,o.container=i;var r=yn.bootpag(n);return r.on("page",function(n,i){var a=e.getSend();a.currentPage=i,t.render(a)}),{render:function(e){o.render(),$.getJSON("/composite/compositeportalList.htm",e,function(t){console.log("组合列表",t);var n=_.max([1,Math.ceil(+t.total/e.pageSize)]),o=handleCompositeData(t.rows);return o.length<1?(i.html(ynconfig.none({margin:300})),void r.hide()):(i.html(template("composite-item-template",o)),r.show().bootpag({page:e.currentPage,total:n}),void a.velocity("scroll",{offset:0}))})}}}());t.render(e.initValue),e.onChange=function(e){t.render(e)}});