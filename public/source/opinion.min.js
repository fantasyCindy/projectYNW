"use strict";var authenticate=function(){function t(t){return _.map(t,function(t,e){return t.index=e+1,t.stock_trend_text=["看涨","看跌"][+t.stock_trend],t.create_time=yn.timeFormat(t.create_time),t.detail="/article/newDetail.htm?article_id="+t.article_id,t})}var e,n,i=1,r=3;return{init:function(){e=$(".judge"),n=e.find(".items")},render:function(){yndata.getOpinion({type:2,page:i,row:r}).done(function(e){e.rows=t(e.rows),n.html(template("judge-template",e.rows))})}}}(),stockType=function(){var t,e,n=1,i=5,r=function(t,e){var n=_.map(t,function(t){return t.create_time=yn.timeFormat(t.create_time),t.detail="/article/newDetail.htm?article_id="+t.article_id,t});return{title:ynconfig.opinionType[e].name,type:e,mainData:n[0],listData:_.takeRight(n,4)}},a=function(){t.on("click",".more",function(){$(this).data("type")})};return{init:function(){t=$("#stockType"),e=t.find(".items"),a()},render:function(t){yndata.getOpinion({page:n,row:i,type:+t}).done(function(n){n=r(n.rows,t),console.log(n),e.find(".type"+t).html(template("stockType-template",n))})}}}(),lastest=function(){function t(t){return _.map(t,function(t){return t.create_time=yn.timeFormat(t.create_time),t.detail="/article/newDetail.htm?article_id="+t.article_id,t.createrName=t.createrName||"约牛网",t})}var e,n,i=1,r=5;return{init:function(){e=$(".lastestAiticles"),n=e.find(".items")},render:function(){yndata.getOpinion({page:i,row:r}).done(function(e){e.rows=t(e.rows),n.append(template("lastest-template",e.rows))})}}}(),bestTeachers=function(){function t(t){return _.map(t,function(t){return t.create_time=yn.timeFormat(t.create_time),t.detail="/article/newDetail.htm?article_id="+t.article_id,t})}var e,n,i=1,r=5;return{init:function(){e=$(".bestTeachers"),n=e.find(".items")},render:function(){yndata.getOpinionBest({page:i,row:r}).done(function(e){console.log("观点牛人",e),e.rows=t(e.rows),n.append(template("bestTeachers-template",e.rows))})}}}();$(function(){authenticate.init(),authenticate.render(),stockType.init(),stockType.render(1),stockType.render(0),stockType.render(3),lastest.init(),lastest.render(),bestTeachers.init(),bestTeachers.render()});