"use strict";$(function(){(function(){var e=function(){var e=window.location.href.match(/\d+$/);return!!e&&e[0]}();if(!e)return layer.msg("订单号错误, 页面即将关闭"),void setTimeout(function(){window.close()},4e3);var n=$("#defray"),t=$("#pay-submit"),o="balance",a="",i=n.find(".defray-item"),c=0,r={balance:function(){return c<1?(layer.msg("余额不足,系统将自动跳转充值页面"),void setTimeout(function(){window.location.href="/html/recharge.htm"},2e3)):void yndata.postGift({orderNum:e}).done(function(e){"success"==e?(layer.msg("支付成功！页面即将关闭"),setTimeout(function(){window.close()},1500)):layer.msg("支付失败 : "+e)})},wechat:function(){window.location.href="/html/recharge.htm?pay_type=0&orderNum="+e},alipay:function(){window.location.href="/html/recharge.htm?pay_type=1&orderNum="+e}};i.on("click","label",function(){$(".defray-item.thisclass").removeClass("thisclass");var e=$(this).parents(".defray-item").addClass("thisclass");o=e.data("source")}),t.click(function(){t.off("click"),r[o]()}),yndata.balance().done(function(e){console.log("账户余额",e),c=+e.balance,n.find(".yn_balance").html("可用余额"+e.balance+"牛币")}),$.post("/web/getPayOrderInfo.htm",{orderNum:e},function(e){console.log("订单信息",e),n.find(".price").text(e.totalPrice),n.find(".indent_num").text("订单号："+e.orderNum),n.find(".indent_describe").text("订单描述："+e.orderName),a=e.goodsType},"json")})()});